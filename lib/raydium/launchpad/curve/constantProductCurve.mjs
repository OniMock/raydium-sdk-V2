var gn=Object.defineProperty;var yn=(e,t,n)=>t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ne=(e,t,n)=>(yn(e,typeof t!="symbol"?t+"":t,n),n);import xe from"bn.js";var ce=9e15,oe=1e9,Qe="0123456789abcdef",Re="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Me="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ye={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ce,maxE:ce,crypto:!1},xt,$,P=!0,Fe="[DecimalError] ",re=Fe+"Invalid argument: ",It=Fe+"Precision limit exceeded",St=Fe+"crypto unavailable",Ct="[object Decimal]",v=Math.floor,M=Math.pow,wn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Pn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,An=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Kt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Z=1e7,g=7,kn=9007199254740991,Tn=Re.length-1,Je=Me.length-1,p={toStringTag:Ct};p.absoluteValue=p.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),f(e)};p.ceil=function(){return f(new this.constructor(this),this.e+1,2)};p.clampedTo=p.clamp=function(e,t){var n,i=this,r=i.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(re+t);return n=i.cmp(e),n<0?e:i.cmp(t)>0?t:new r(i)};p.comparedTo=p.cmp=function(e){var t,n,i,r,o=this,s=o.d,a=(e=new o.constructor(e)).d,u=o.s,c=e.s;if(!s||!a)return!u||!c?NaN:u!==c?u:s===a?0:!s^u<0?1:-1;if(!s[0]||!a[0])return s[0]?u:a[0]?-c:0;if(u!==c)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(i=s.length,r=a.length,t=0,n=i<r?i:r;t<n;++t)if(s[t]!==a[t])return s[t]>a[t]^u<0?1:-1;return i===r?0:i>r^u<0?1:-1};p.cosine=p.cos=function(){var e,t,n=this,i=n.constructor;return n.d?n.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+g,i.rounding=1,n=hn(i,Ot(i,n)),i.precision=e,i.rounding=t,f($==2||$==3?n.neg():n,e,t,!0)):new i(1):new i(NaN)};p.cubeRoot=p.cbrt=function(){var e,t,n,i,r,o,s,a,u,c,l=this,m=l.constructor;if(!l.isFinite()||l.isZero())return new m(l);for(P=!1,o=l.s*M(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=O(l.d),e=l.e,(o=(e-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=M(n,1/3),e=v((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?n="5e"+e:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),i=new m(n),i.s=l.s):i=new m(o.toString()),s=(e=m.precision)+3;;)if(a=i,u=a.times(a).times(a),c=u.plus(l),i=I(c.plus(l).times(a),c.plus(u),s+2,1),O(a.d).slice(0,s)===(n=O(i.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!r&&n=="4999"){if(!r&&(f(a,e+1,0),a.times(a).times(a).eq(l))){i=a;break}s+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(f(i,e+1,1),t=!i.times(i).times(i).eq(l));break}return P=!0,f(i,e,m.rounding,t)};p.decimalPlaces=p.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-v(this.e/g))*g,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};p.dividedBy=p.div=function(e){return I(this,new this.constructor(e))};p.dividedToIntegerBy=p.divToInt=function(e){var t=this,n=t.constructor;return f(I(t,new n(e),0,1,1),n.precision,n.rounding)};p.equals=p.eq=function(e){return this.cmp(e)===0};p.floor=function(){return f(new this.constructor(this),this.e+1,3)};p.greaterThan=p.gt=function(e){return this.cmp(e)>0};p.greaterThanOrEqualTo=p.gte=function(e){var t=this.cmp(e);return t==1||t===0};p.hyperbolicCosine=p.cosh=function(){var e,t,n,i,r,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,i=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,r=o.d.length,r<32?(e=Math.ceil(r/3),t=(1/ve(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=ue(s,1,o.times(t),new s(1),!0);for(var u,c=e,l=new s(8);c--;)u=o.times(o),o=a.minus(u.times(l.minus(u.times(l))));return f(o,s.precision=n,s.rounding=i,!0)};p.hyperbolicSine=p.sinh=function(){var e,t,n,i,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(r.e,r.sd())+4,o.rounding=1,i=r.d.length,i<3)r=ue(o,2,r,r,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,r=r.times(1/ve(5,e)),r=ue(o,2,r,r,!0);for(var s,a=new o(5),u=new o(16),c=new o(20);e--;)s=r.times(r),r=r.times(a.plus(s.times(u.times(s).plus(c))))}return o.precision=t,o.rounding=n,f(r,t,n,!0)};p.hyperbolicTangent=p.tanh=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,I(n.sinh(),n.cosh(),i.precision=e,i.rounding=t)):new i(n.s)};p.inverseCosine=p.acos=function(){var e,t=this,n=t.constructor,i=t.abs().cmp(1),r=n.precision,o=n.rounding;return i!==-1?i===0?t.isNeg()?j(n,r,o):new n(0):new n(NaN):t.isZero()?j(n,r+4,o).times(.5):(n.precision=r+6,n.rounding=1,t=t.asin(),e=j(n,r+4,o).times(.5),n.precision=r,n.rounding=o,e.minus(t))};p.inverseHyperbolicCosine=p.acosh=function(){var e,t,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,P=!1,n=n.times(n).minus(1).sqrt().plus(n),P=!0,i.precision=e,i.rounding=t,n.ln()):new i(n)};p.inverseHyperbolicSine=p.asinh=function(){var e,t,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,P=!1,n=n.times(n).plus(1).sqrt().plus(n),P=!0,i.precision=e,i.rounding=t,n.ln())};p.inverseHyperbolicTangent=p.atanh=function(){var e,t,n,i,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=o.precision,t=o.rounding,i=r.sd(),Math.max(i,e)<2*-r.e-1?f(new o(r),e,t,!0):(o.precision=n=i-r.e,r=I(r.plus(1),new o(1).minus(r),n+e,1),o.precision=e+4,o.rounding=1,r=r.ln(),o.precision=e,o.rounding=t,r.times(.5))):new o(NaN)};p.inverseSine=p.asin=function(){var e,t,n,i,r=this,o=r.constructor;return r.isZero()?new o(r):(t=r.abs().cmp(1),n=o.precision,i=o.rounding,t!==-1?t===0?(e=j(o,n+4,i).times(.5),e.s=r.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,r.times(2)))};p.inverseTangent=p.atan=function(){var e,t,n,i,r,o,s,a,u,c=this,l=c.constructor,m=l.precision,d=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&m+4<=Je)return s=j(l,m+4,d).times(.25),s.s=c.s,s}else{if(!c.s)return new l(NaN);if(m+4<=Je)return s=j(l,m+4,d).times(.5),s.s=c.s,s}for(l.precision=a=m+10,l.rounding=1,n=Math.min(28,a/g+2|0),e=n;e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(P=!1,t=Math.ceil(a/g),i=1,u=c.times(c),s=new l(c),r=c;e!==-1;)if(r=r.times(u),o=s.minus(r.div(i+=2)),r=r.times(u),s=o.plus(r.div(i+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),P=!0,f(s,l.precision=m,l.rounding=d,!0)};p.isFinite=function(){return!!this.d};p.isInteger=p.isInt=function(){return!!this.d&&v(this.e/g)>this.d.length-2};p.isNaN=function(){return!this.s};p.isNegative=p.isNeg=function(){return this.s<0};p.isPositive=p.isPos=function(){return this.s>0};p.isZero=function(){return!!this.d&&this.d[0]===0};p.lessThan=p.lt=function(e){return this.cmp(e)<0};p.lessThanOrEqualTo=p.lte=function(e){return this.cmp(e)<1};p.logarithm=p.log=function(e){var t,n,i,r,o,s,a,u,c=this,l=c.constructor,m=l.precision,d=l.rounding,b=5;if(e==null)e=new l(10),t=!0;else{if(e=new l(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new l(n&&!n[0]?-1/0:c.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(r=n[0];r%10===0;)r/=10;o=r!==1}if(P=!1,a=m+b,s=ie(c,a),i=t?Oe(l,a+10):ie(e,a),u=I(s,i,a,1),fe(u.d,r=m,d))do if(a+=10,s=ie(c,a),i=t?Oe(l,a+10):ie(e,a),u=I(s,i,a,1),!o){+O(u.d).slice(r+1,r+15)+1==1e14&&(u=f(u,m+1,0));break}while(fe(u.d,r+=10,d));return P=!0,f(u,m,d)};p.minus=p.sub=function(e){var t,n,i,r,o,s,a,u,c,l,m,d,b=this,h=b.constructor;if(e=new h(e),!b.d||!e.d)return!b.s||!e.s?e=new h(NaN):b.d?e.s=-e.s:e=new h(e.d||b.s!==e.s?b:NaN),e;if(b.s!=e.s)return e.s=-e.s,b.plus(e);if(c=b.d,d=e.d,a=h.precision,u=h.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else if(c[0])e=new h(b);else return new h(u===3?-0:0);return P?f(e,a,u):e}if(n=v(e.e/g),l=v(b.e/g),c=c.slice(),o=l-n,o){for(m=o<0,m?(t=c,o=-o,s=d.length):(t=d,n=l,s=c.length),i=Math.max(Math.ceil(a/g),s)+2,o>i&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for(i=c.length,s=d.length,m=i<s,m&&(s=i),i=0;i<s;i++)if(c[i]!=d[i]){m=c[i]<d[i];break}o=0}for(m&&(t=c,c=d,d=t,e.s=-e.s),s=c.length,i=d.length-s;i>0;--i)c[s++]=0;for(i=d.length;i>o;){if(c[--i]<d[i]){for(r=i;r&&c[--r]===0;)c[r]=Z-1;--c[r],c[i]+=Z}c[i]-=d[i]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=Ee(c,n),P?f(e,a,u):e):new h(u===3?-0:0)};p.modulo=p.mod=function(e){var t,n=this,i=n.constructor;return e=new i(e),!n.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||n.d&&!n.d[0]?f(new i(n),i.precision,i.rounding):(P=!1,i.modulo==9?(t=I(n,e.abs(),0,3,1),t.s*=e.s):t=I(n,e,0,i.modulo,1),t=t.times(e),P=!0,n.minus(t))};p.naturalExponential=p.exp=function(){return $e(this)};p.naturalLogarithm=p.ln=function(){return ie(this)};p.negated=p.neg=function(){var e=new this.constructor(this);return e.s=-e.s,f(e)};p.plus=p.add=function(e){var t,n,i,r,o,s,a,u,c,l,m=this,d=m.constructor;if(e=new d(e),!m.d||!e.d)return!m.s||!e.s?e=new d(NaN):m.d||(e=new d(e.d||m.s===e.s?m:NaN)),e;if(m.s!=e.s)return e.s=-e.s,m.minus(e);if(c=m.d,l=e.d,a=d.precision,u=d.rounding,!c[0]||!l[0])return l[0]||(e=new d(m)),P?f(e,a,u):e;if(o=v(m.e/g),i=v(e.e/g),c=c.slice(),r=o-i,r){for(r<0?(n=c,r=-r,s=l.length):(n=l,i=o,s=c.length),o=Math.ceil(a/g),s=o>s?o+1:s+1,r>s&&(r=s,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(s=c.length,r=l.length,s-r<0&&(r=s,n=l,l=c,c=n),t=0;r;)t=(c[--r]=c[r]+l[r]+t)/Z|0,c[r]%=Z;for(t&&(c.unshift(t),++i),s=c.length;c[--s]==0;)c.pop();return e.d=c,e.e=Ee(c,i),P?f(e,a,u):e};p.precision=p.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(re+e);return n.d?(t=Nt(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};p.round=function(){var e=this,t=e.constructor;return f(new t(e),e.e+1,t.rounding)};p.sine=p.sin=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+g,i.rounding=1,n=xn(i,Ot(i,n)),i.precision=e,i.rounding=t,f($>2?n.neg():n,e,t,!0)):new i(NaN)};p.squareRoot=p.sqrt=function(){var e,t,n,i,r,o,s=this,a=s.d,u=s.e,c=s.s,l=s.constructor;if(c!==1||!a||!a[0])return new l(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);for(P=!1,c=Math.sqrt(+s),c==0||c==1/0?(t=O(a),(t.length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=v((u+1)/2)-(u<0||u%2),c==1/0?t="5e"+u:(t=c.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),i=new l(t)):i=new l(c.toString()),n=(u=l.precision)+3;;)if(o=i,i=o.plus(I(s,o,n+2,1)).times(.5),O(o.d).slice(0,n)===(t=O(i.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!r&&t=="4999"){if(!r&&(f(o,u+1,0),o.times(o).eq(s))){i=o;break}n+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(f(i,u+1,1),e=!i.times(i).eq(s));break}return P=!0,f(i,u,l.rounding,e)};p.tangent=p.tan=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,n=n.sin(),n.s=1,n=I(n,new i(1).minus(n.times(n)).sqrt(),e+10,0),i.precision=e,i.rounding=t,f($==2||$==4?n.neg():n,e,t,!0)):new i(NaN)};p.times=p.mul=function(e){var t,n,i,r,o,s,a,u,c,l=this,m=l.constructor,d=l.d,b=(e=new m(e)).d;if(e.s*=l.s,!d||!d[0]||!b||!b[0])return new m(!e.s||d&&!d[0]&&!b||b&&!b[0]&&!d?NaN:!d||!b?e.s/0:e.s*0);for(n=v(l.e/g)+v(e.e/g),u=d.length,c=b.length,u<c&&(o=d,d=b,b=o,s=u,u=c,c=s),o=[],s=u+c,i=s;i--;)o.push(0);for(i=c;--i>=0;){for(t=0,r=u+i;r>i;)a=o[r]+b[i]*d[r-i-1]+t,o[r--]=a%Z|0,t=a/Z|0;o[r]=(o[r]+t)%Z|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=Ee(o,n),P?f(e,m.precision,m.rounding):e};p.toBinary=function(e,t){return tt(this,2,e,t)};p.toDecimalPlaces=p.toDP=function(e,t){var n=this,i=n.constructor;return n=new i(n),e===void 0?n:(q(e,0,oe),t===void 0?t=i.rounding:q(t,0,8),f(n,e+n.e+1,t))};p.toExponential=function(e,t){var n,i=this,r=i.constructor;return e===void 0?n=Q(i,!0):(q(e,0,oe),t===void 0?t=r.rounding:q(t,0,8),i=f(new r(i),e+1,t),n=Q(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};p.toFixed=function(e,t){var n,i,r=this,o=r.constructor;return e===void 0?n=Q(r):(q(e,0,oe),t===void 0?t=o.rounding:q(t,0,8),i=f(new o(r),e+r.e+1,t),n=Q(i,!1,e+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};p.toFraction=function(e){var t,n,i,r,o,s,a,u,c,l,m,d,b=this,h=b.d,k=b.constructor;if(!h)return new k(b);if(c=n=new k(1),i=u=new k(0),t=new k(i),o=t.e=Nt(h)-b.e-1,s=o%g,t.d[0]=M(10,s<0?g+s:s),e==null)e=o>0?t:c;else{if(a=new k(e),!a.isInt()||a.lt(c))throw Error(re+a);e=a.gt(t)?o>0?t:c:a}for(P=!1,a=new k(O(h)),l=k.precision,k.precision=o=h.length*g*2;m=I(a,t,0,1,1),r=n.plus(m.times(i)),r.cmp(e)!=1;)n=i,i=r,r=c,c=u.plus(m.times(r)),u=r,r=t,t=a.minus(m.times(r)),a=r;return r=I(e.minus(n),i,0,1,1),u=u.plus(r.times(c)),n=n.plus(r.times(i)),u.s=c.s=b.s,d=I(c,i,o,1).minus(b).abs().cmp(I(u,n,o,1).minus(b).abs())<1?[c,i]:[u,n],k.precision=l,P=!0,d};p.toHexadecimal=p.toHex=function(e,t){return tt(this,16,e,t)};p.toNearest=function(e,t){var n=this,i=n.constructor;if(n=new i(n),e==null){if(!n.d)return n;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:q(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(P=!1,n=I(n,e,0,t,1).times(e),P=!0,f(n)):(e.s=n.s,n=e),n};p.toNumber=function(){return+this};p.toOctal=function(e,t){return tt(this,8,e,t)};p.toPower=p.pow=function(e){var t,n,i,r,o,s,a=this,u=a.constructor,c=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(M(+a,c));if(a=new u(a),a.eq(1))return a;if(i=u.precision,o=u.rounding,e.eq(1))return f(a,i,o);if(t=v(e.e/g),t>=e.d.length-1&&(n=c<0?-c:c)<=kn)return r=Lt(u,a,n,i),e.s<0?new u(1).div(r):f(r,i,o);if(s=a.s,s<0){if(t<e.d.length-1)return new u(NaN);if((e.d[t]&1)==0&&(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=M(+a,c),t=n==0||!isFinite(n)?v(c*(Math.log("0."+O(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(P=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),r=$e(e.times(ie(a,i+n)),i),r.d&&(r=f(r,i+5,1),fe(r.d,i,o)&&(t=i+10,r=f($e(e.times(ie(a,t+n)),t),t+5,1),+O(r.d).slice(i+1,i+15)+1==1e14&&(r=f(r,i+1,0)))),r.s=s,P=!0,u.rounding=o,f(r,i,o))};p.toPrecision=function(e,t){var n,i=this,r=i.constructor;return e===void 0?n=Q(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(q(e,1,oe),t===void 0?t=r.rounding:q(t,0,8),i=f(new r(i),e,t),n=Q(i,e<=i.e||i.e<=r.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+n:n};p.toSignificantDigits=p.toSD=function(e,t){var n=this,i=n.constructor;return e===void 0?(e=i.precision,t=i.rounding):(q(e,1,oe),t===void 0?t=i.rounding:q(t,0,8)),f(new i(n),e,t)};p.toString=function(){var e=this,t=e.constructor,n=Q(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};p.truncated=p.trunc=function(){return f(new this.constructor(this),this.e+1,1)};p.valueOf=p.toJSON=function(){var e=this,t=e.constructor,n=Q(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function O(e){var t,n,i,r=e.length-1,o="",s=e[0];if(r>0){for(o+=s,t=1;t<r;t++)i=e[t]+"",n=g-i.length,n&&(o+=ne(n)),o+=i;s=e[t],i=s+"",n=g-i.length,n&&(o+=ne(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function q(e,t,n){if(e!==~~e||e<t||e>n)throw Error(re+e)}function fe(e,t,n,i){var r,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=g,r=0):(r=Math.ceil((t+1)/g),t%=g),o=M(10,g-t),a=e[r]%o|0,i==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[r+1]/o/100|0)==M(10,t-2)-1||(a==o/2||a==0)&&(e[r+1]/o/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),s=(i||n<4)&&a==9999||!i&&n>3&&a==4999):s=((i||n<4)&&a+1==o||!i&&n>3&&a+1==o/2)&&(e[r+1]/o/1e3|0)==M(10,t-3)-1,s}function Le(e,t,n){for(var i,r=[0],o,s=0,a=e.length;s<a;){for(o=r.length;o--;)r[o]*=t;for(r[0]+=Qe.indexOf(e.charAt(s++)),i=0;i<r.length;i++)r[i]>n-1&&(r[i+1]===void 0&&(r[i+1]=0),r[i+1]+=r[i]/n|0,r[i]%=n)}return r.reverse()}function hn(e,t){var n,i,r;if(t.isZero())return t;i=t.d.length,i<32?(n=Math.ceil(i/3),r=(1/ve(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=ue(e,1,t.times(r),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}var I=function(){function e(i,r,o){var s,a=0,u=i.length;for(i=i.slice();u--;)s=i[u]*r+a,i[u]=s%o|0,a=s/o|0;return a&&i.unshift(a),i}function t(i,r,o,s){var a,u;if(o!=s)u=o>s?1:-1;else for(a=u=0;a<o;a++)if(i[a]!=r[a]){u=i[a]>r[a]?1:-1;break}return u}function n(i,r,o,s){for(var a=0;o--;)i[o]-=a,a=i[o]<r[o]?1:0,i[o]=a*s+i[o]-r[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,o,s,a,u){var c,l,m,d,b,h,k,V,R,H,x,F,Ie,J,ze,Se,pe,je,z,Ce,Ke=i.constructor,Ze=i.s==r.s?1:-1,E=i.d,S=r.d;if(!E||!E[0]||!S||!S[0])return new Ke(!i.s||!r.s||(E?S&&E[0]==S[0]:!S)?NaN:E&&E[0]==0||!S?Ze*0:Ze/0);for(u?(b=1,l=i.e-r.e):(u=Z,b=g,l=v(i.e/b)-v(r.e/b)),z=S.length,pe=E.length,R=new Ke(Ze),H=R.d=[],m=0;S[m]==(E[m]||0);m++);if(S[m]>(E[m]||0)&&l--,o==null?(J=o=Ke.precision,s=Ke.rounding):a?J=o+(i.e-r.e)+1:J=o,J<0)H.push(1),h=!0;else{if(J=J/b+2|0,m=0,z==1){for(d=0,S=S[0],J++;(m<pe||d)&&J--;m++)ze=d*u+(E[m]||0),H[m]=ze/S|0,d=ze%S|0;h=d||m<pe}else{for(d=u/(S[0]+1)|0,d>1&&(S=e(S,d,u),E=e(E,d,u),z=S.length,pe=E.length),Se=z,x=E.slice(0,z),F=x.length;F<z;)x[F++]=0;Ce=S.slice(),Ce.unshift(0),je=S[0],S[1]>=u/2&&++je;do d=0,c=t(S,x,z,F),c<0?(Ie=x[0],z!=F&&(Ie=Ie*u+(x[1]||0)),d=Ie/je|0,d>1?(d>=u&&(d=u-1),k=e(S,d,u),V=k.length,F=x.length,c=t(k,x,V,F),c==1&&(d--,n(k,z<V?Ce:S,V,u))):(d==0&&(c=d=1),k=S.slice()),V=k.length,V<F&&k.unshift(0),n(x,k,F,u),c==-1&&(F=x.length,c=t(S,x,z,F),c<1&&(d++,n(x,z<F?Ce:S,F,u))),F=x.length):c===0&&(d++,x=[0]),H[m++]=d,c&&x[0]?x[F++]=E[Se]||0:(x=[E[Se]],F=1);while((Se++<pe||x[0]!==void 0)&&J--);h=x[0]!==void 0}H[0]||H.shift()}if(b==1)R.e=l,xt=h;else{for(m=1,d=H[0];d>=10;d/=10)m++;R.e=m+l*b-1,f(R,a?o+R.e+1:o,s,h)}return R}}();function f(e,t,n,i){var r,o,s,a,u,c,l,m,d,b=e.constructor;e:if(t!=null){if(m=e.d,!m)return e;for(r=1,a=m[0];a>=10;a/=10)r++;if(o=t-r,o<0)o+=g,s=t,l=m[d=0],u=l/M(10,r-s-1)%10|0;else if(d=Math.ceil((o+1)/g),a=m.length,d>=a)if(i){for(;a++<=d;)m.push(0);l=u=0,r=1,o%=g,s=o-g+1}else break e;else{for(l=a=m[d],r=1;a>=10;a/=10)r++;o%=g,s=o-g+r,u=s<0?0:l/M(10,r-s-1)%10|0}if(i=i||t<0||m[d+1]!==void 0||(s<0?l:l%M(10,r-s-1)),c=n<4?(u||i)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||i||n==6&&(o>0?s>0?l/M(10,r-s):0:m[d-1])%10&1||n==(e.s<0?8:7)),t<1||!m[0])return m.length=0,c?(t-=e.e+1,m[0]=M(10,(g-t%g)%g),e.e=-t||0):m[0]=e.e=0,e;if(o==0?(m.length=d,a=1,d--):(m.length=d+1,a=M(10,g-o),m[d]=s>0?(l/M(10,r-s)%M(10,s)|0)*a:0),c)for(;;)if(d==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,m[0]==Z&&(m[0]=1));break}else{if(m[d]+=a,m[d]!=Z)break;m[d--]=0,a=1}for(o=m.length;m[--o]===0;)m.pop()}return P&&(e.e>b.maxE?(e.d=null,e.e=NaN):e.e<b.minE&&(e.e=0,e.d=[0])),e}function Q(e,t,n){if(!e.isFinite())return Mt(e);var i,r=e.e,o=O(e.d),s=o.length;return t?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+ne(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):r<0?(o="0."+ne(-r-1)+o,n&&(i=n-s)>0&&(o+=ne(i))):r>=s?(o+=ne(r+1-s),n&&(i=n-r-1)>0&&(o=o+"."+ne(i))):((i=r+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(o+="."),o+=ne(i))),o}function Ee(e,t){var n=e[0];for(t*=g;n>=10;n/=10)t++;return t}function Oe(e,t,n){if(t>Tn)throw P=!0,n&&(e.precision=n),Error(It);return f(new e(Re),t,1,!0)}function j(e,t,n){if(t>Je)throw Error(It);return f(new e(Me),t,n,!0)}function Nt(e){var t=e.length-1,n=t*g+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function ne(e){for(var t="";e--;)t+="0";return t}function Lt(e,t,n,i){var r,o=new e(1),s=Math.ceil(i/g+4);for(P=!1;;){if(n%2&&(o=o.times(t),ht(o.d,s)&&(r=!0)),n=v(n/2),n===0){n=o.d.length-1,r&&o.d[n]===0&&++o.d[n];break}t=t.times(t),ht(t.d,s)}return P=!0,o}function Tt(e){return e.d[e.d.length-1]&1}function Rt(e,t,n){for(var i,r=new e(t[0]),o=0;++o<t.length;)if(i=new e(t[o]),i.s)r[n](i)&&(r=i);else{r=i;break}return r}function $e(e,t){var n,i,r,o,s,a,u,c=0,l=0,m=0,d=e.constructor,b=d.rounding,h=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(P=!1,u=h):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),m+=5;for(i=Math.log(M(2,m))/Math.LN10*2+5|0,u+=i,n=o=s=new d(1),d.precision=u;;){if(o=f(o.times(e),u,1),n=n.times(++l),a=s.plus(I(o,n,u,1)),O(a.d).slice(0,u)===O(s.d).slice(0,u)){for(r=m;r--;)s=f(s.times(s),u,1);if(t==null)if(c<3&&fe(s.d,u-i,b,c))d.precision=u+=10,n=o=a=new d(1),l=0,c++;else return f(s,d.precision=h,b,P=!0);else return d.precision=h,s}s=a}}function ie(e,t){var n,i,r,o,s,a,u,c,l,m,d,b=1,h=10,k=e,V=k.d,R=k.constructor,H=R.rounding,x=R.precision;if(k.s<0||!V||!V[0]||!k.e&&V[0]==1&&V.length==1)return new R(V&&!V[0]?-1/0:k.s!=1?NaN:V?0:k);if(t==null?(P=!1,l=x):l=t,R.precision=l+=h,n=O(V),i=n.charAt(0),Math.abs(o=k.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)k=k.times(e),n=O(k.d),i=n.charAt(0),b++;o=k.e,i>1?(k=new R("0."+n),o++):k=new R(i+"."+n.slice(1))}else return c=Oe(R,l+2,x).times(o+""),k=ie(new R(i+"."+n.slice(1)),l-h).plus(c),R.precision=x,t==null?f(k,x,H,P=!0):k;for(m=k,u=s=k=I(k.minus(1),k.plus(1),l,1),d=f(k.times(k),l,1),r=3;;){if(s=f(s.times(d),l,1),c=u.plus(I(s,new R(r),l,1)),O(c.d).slice(0,l)===O(u.d).slice(0,l))if(u=u.times(2),o!==0&&(u=u.plus(Oe(R,l+2,x).times(o+""))),u=I(u,new R(b),l,1),t==null)if(fe(u.d,l-h,H,a))R.precision=l+=h,c=s=k=I(m.minus(1),m.plus(1),l,1),d=f(k.times(k),l,1),r=a=1;else return f(u,R.precision=x,H,P=!0);else return R.precision=x,u;u=c,r+=2}}function Mt(e){return String(e.s*e.s/0)}function et(e,t){var n,i,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charCodeAt(i)===48;i++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(i,r),t){if(r-=i,e.e=n=n-i-1,e.d=[],i=(n+1)%g,n<0&&(i+=g),i<r){for(i&&e.d.push(+t.slice(0,i)),r-=g;i<r;)e.d.push(+t.slice(i,i+=g));t=t.slice(i),i=g-t.length}else i-=r;for(;i--;)t+="0";e.d.push(+t),P&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Bn(e,t){var n,i,r,o,s,a,u,c,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Kt.test(t))return et(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Pn.test(t))n=16,t=t.toLowerCase();else if(wn.test(t))n=2;else if(An.test(t))n=8;else throw Error(re+t);for(o=t.search(/p/i),o>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,i=e.constructor,s&&(t=t.replace(".",""),a=t.length,o=a-o,r=Lt(i,new i(n),o,o*2)),c=Le(t,n,Z),l=c.length-1,o=l;c[o]===0;--o)c.pop();return o<0?new i(e.s*0):(e.e=Ee(c,l),e.d=c,P=!1,s&&(e=I(e,r,a*4)),u&&(e=e.times(Math.abs(u)<54?M(2,u):be.pow(2,u))),P=!0,e)}function xn(e,t){var n,i=t.d.length;if(i<3)return t.isZero()?t:ue(e,2,t,t);n=1.4*Math.sqrt(i),n=n>16?16:n|0,t=t.times(1/ve(5,n)),t=ue(e,2,t,t);for(var r,o=new e(5),s=new e(16),a=new e(20);n--;)r=t.times(t),t=t.times(o.plus(r.times(s.times(r).minus(a))));return t}function ue(e,t,n,i,r){var o,s,a,u,c=1,l=e.precision,m=Math.ceil(l/g);for(P=!1,u=n.times(n),a=new e(i);;){if(s=I(a.times(u),new e(t++*t++),l,1),a=r?i.plus(s):i.minus(s),i=I(s.times(u),new e(t++*t++),l,1),s=a.plus(i),s.d[m]!==void 0){for(o=m;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=i,i=s,s=o,c++}return P=!0,s.d.length=m+1,s}function ve(e,t){for(var n=e;--t;)n*=e;return n}function Ot(e,t){var n,i=t.s<0,r=j(e,e.precision,1),o=r.times(.5);if(t=t.abs(),t.lte(o))return $=i?4:1,t;if(n=t.divToInt(r),n.isZero())$=i?3:2;else{if(t=t.minus(n.times(r)),t.lte(o))return $=Tt(n)?i?2:3:i?4:1,t;$=Tt(n)?i?1:4:i?3:2}return t.minus(r).abs()}function tt(e,t,n,i){var r,o,s,a,u,c,l,m,d,b=e.constructor,h=n!==void 0;if(h?(q(n,1,oe),i===void 0?i=b.rounding:q(i,0,8)):(n=b.precision,i=b.rounding),!e.isFinite())l=Mt(e);else{for(l=Q(e),s=l.indexOf("."),h?(r=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):r=t,s>=0&&(l=l.replace(".",""),d=new b(1),d.e=l.length-s,d.d=Le(Q(d),10,r),d.e=d.d.length),m=Le(l,10,r),o=u=m.length;m[--u]==0;)m.pop();if(!m[0])l=h?"0p+0":"0";else{if(s<0?o--:(e=new b(e),e.d=m,e.e=o,e=I(e,d,n,i,0,r),m=e.d,o=e.e,c=xt),s=m[n],a=r/2,c=c||m[n+1]!==void 0,c=i<4?(s!==void 0||c)&&(i===0||i===(e.s<0?3:2)):s>a||s===a&&(i===4||c||i===6&&m[n-1]&1||i===(e.s<0?8:7)),m.length=n,c)for(;++m[--n]>r-1;)m[n]=0,n||(++o,m.unshift(1));for(u=m.length;!m[u-1];--u);for(s=0,l="";s<u;s++)l+=Qe.charAt(m[s]);if(h){if(u>1)if(t==16||t==8){for(s=t==16?4:3,--u;u%s;u++)l+="0";for(m=Le(l,r,t),u=m.length;!m[u-1];--u);for(s=1,l="1.";s<u;s++)l+=Qe.charAt(m[s])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o))}l=(t==16?"0x":t==2?"0b":t==8?"0o":"")+l}return e.s<0?"-"+l:l}function ht(e,t){if(e.length>t)return e.length=t,!0}function In(e){return new this(e).abs()}function Sn(e){return new this(e).acos()}function Cn(e){return new this(e).acosh()}function Kn(e,t){return new this(e).plus(t)}function Nn(e){return new this(e).asin()}function Ln(e){return new this(e).asinh()}function Rn(e){return new this(e).atan()}function Mn(e){return new this(e).atanh()}function On(e,t){e=new this(e),t=new this(t);var n,i=this.precision,r=this.rounding,o=i+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=j(this,o,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?j(this,i,r):new this(0),n.s=e.s):!e.d||t.isZero()?(n=j(this,o,1).times(.5),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(I(e,t,o,1)),t=j(this,o,1),this.precision=i,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(I(e,t,o,1)),n}function Fn(e){return new this(e).cbrt()}function En(e){return f(e=new this(e),e.e+1,2)}function vn(e,t,n){return new this(e).clamp(t,n)}function Dn(e){if(!e||typeof e!="object")throw Error(Fe+"Object expected");var t,n,i,r=e.defaults===!0,o=["precision",1,oe,"rounding",0,8,"toExpNeg",-ce,0,"toExpPos",0,ce,"maxE",0,ce,"minE",-ce,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],r&&(this[n]=Ye[n]),(i=e[n])!==void 0)if(v(i)===i&&i>=o[t+1]&&i<=o[t+2])this[n]=i;else throw Error(re+n+": "+i);if(n="crypto",r&&(this[n]=Ye[n]),(i=e[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(St);else this[n]=!1;else throw Error(re+n+": "+i);return this}function Vn(e){return new this(e).cos()}function _n(e){return new this(e).cosh()}function Ft(e){var t,n,i;function r(o){var s,a,u,c=this;if(!(c instanceof r))return new r(o);if(c.constructor=r,Bt(o)){c.s=o.s,P?!o.d||o.e>r.maxE?(c.e=NaN,c.d=null):o.e<r.minE?(c.e=0,c.d=[0]):(c.e=o.e,c.d=o.d.slice()):(c.e=o.e,c.d=o.d?o.d.slice():o.d);return}if(u=typeof o,u==="number"){if(o===0){c.s=1/o<0?-1:1,c.e=0,c.d=[0];return}if(o<0?(o=-o,c.s=-1):c.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;P?s>r.maxE?(c.e=NaN,c.d=null):s<r.minE?(c.e=0,c.d=[0]):(c.e=s,c.d=[o]):(c.e=s,c.d=[o]);return}else if(o*0!==0){o||(c.s=NaN),c.e=NaN,c.d=null;return}return et(c,o.toString())}else if(u!=="string")throw Error(re+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),c.s=-1):(a===43&&(o=o.slice(1)),c.s=1),Kt.test(o)?et(c,o):Bn(c,o)}if(r.prototype=p,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=Dn,r.clone=Ft,r.isDecimal=Bt,r.abs=In,r.acos=Sn,r.acosh=Cn,r.add=Kn,r.asin=Nn,r.asinh=Ln,r.atan=Rn,r.atanh=Mn,r.atan2=On,r.cbrt=Fn,r.ceil=En,r.clamp=vn,r.cos=Vn,r.cosh=_n,r.div=Wn,r.exp=qn,r.floor=Un,r.hypot=Gn,r.ln=Xn,r.log=Hn,r.log10=jn,r.log2=zn,r.max=Zn,r.min=Qn,r.mod=Yn,r.mul=Jn,r.pow=$n,r.random=ei,r.round=ti,r.sign=ni,r.sin=ii,r.sinh=ri,r.sqrt=oi,r.sub=si,r.sum=ai,r.tan=ci,r.tanh=ui,r.trunc=li,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return r.config(e),r}function Wn(e,t){return new this(e).div(t)}function qn(e){return new this(e).exp()}function Un(e){return f(e=new this(e),e.e+1,3)}function Gn(){var e,t,n=new this(0);for(P=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return P=!0,new this(1/0);n=t}return P=!0,n.sqrt()}function Bt(e){return e instanceof be||e&&e.toStringTag===Ct||!1}function Xn(e){return new this(e).ln()}function Hn(e,t){return new this(e).log(t)}function zn(e){return new this(e).log(2)}function jn(e){return new this(e).log(10)}function Zn(){return Rt(this,arguments,"lt")}function Qn(){return Rt(this,arguments,"gt")}function Yn(e,t){return new this(e).mod(t)}function Jn(e,t){return new this(e).mul(t)}function $n(e,t){return new this(e).pow(t)}function ei(e){var t,n,i,r,o=0,s=new this(1),a=[];if(e===void 0?e=this.precision:q(e,1,oe),i=Math.ceil(e/g),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));o<i;)r=t[o],r>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);o<i;)r=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(r%1e7),o+=4);o=i/4}else throw Error(St);else for(;o<i;)a[o++]=Math.random()*1e7|0;for(i=a[--o],e%=g,i&&e&&(r=M(10,g-e),a[o]=(i/r|0)*r);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=g)a.shift();for(i=1,r=a[0];r>=10;r/=10)i++;i<g&&(n-=g-i)}return s.e=n,s.d=a,s}function ti(e){return f(e=new this(e),e.e+1,this.rounding)}function ni(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function ii(e){return new this(e).sin()}function ri(e){return new this(e).sinh()}function oi(e){return new this(e).sqrt()}function si(e,t){return new this(e).sub(t)}function ai(){var e=0,t=arguments,n=new this(t[e]);for(P=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return P=!0,f(n,this.precision,this.rounding)}function ci(e){return new this(e).tan()}function ui(e){return new this(e).tanh()}function li(e){return f(e=new this(e),e.e+1,1)}p[Symbol.for("nodejs.util.inspect.custom")]=p.toString;p[Symbol.toStringTag]="Decimal";var be=p.constructor=Ft(Ye);Re=new be(Re);Me=new be(Me);var G=be;import{PublicKey as Sr}from"@solana/web3.js";import{get as Et,set as mi}from"lodash";var nt=class{logLevel;name;constructor(t){this.logLevel=t.logLevel!==void 0?t.logLevel:0,this.name=t.name}set level(t){this.logLevel=t}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(t){return t<=this.logLevel}error(...t){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...t),this):this}logWithError(...t){let n=t.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)}warning(...t){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...t),this):this}info(...t){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...t),this):this}debug(...t){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...t),this):this}},vt={},di={};function _(e){let t=Et(vt,e);if(!t){let n=Et(di,e);t=new nt({name:e,logLevel:n}),mi(vt,e,t)}return t}import{MINT_SIZE as Lr,TOKEN_PROGRAM_ID as Rr,getTransferFeeConfig as Mr,unpackMint as Or}from"@solana/spl-token";var Fr=_("Raydium_accountInfo_util");import ee from"bn.js";import Ai from"big.js";import $r from"bn.js";import pi from"toformat";var fi=pi,ge=fi;import _e from"big.js";import gi from"bn.js";import yi from"decimal.js-light";import ye from"bn.js";var Vt=9007199254740991;function Y(e){let t=_("Raydium_parseBigNumberish");if(e instanceof ye)return e;if(typeof e=="string"){if(e.match(/^-?[0-9]+$/))return new ye(e);t.logWithError(`invalid BigNumberish string: ${e}`)}return typeof e=="number"?(e%1&&t.logWithError(`BigNumberish number underflow: ${e}`),(e>=Vt||e<=-Vt)&&t.logWithError(`BigNumberish number overflow: ${e}`),new ye(String(e))):typeof e=="bigint"?new ye(e.toString()):(t.error(`invalid BigNumberish value: ${e}`),new ye(0))}var Ve=_("module/fraction"),it=ge(_e),we=ge(yi),wi={[0]:we.ROUND_DOWN,[1]:we.ROUND_HALF_UP,[2]:we.ROUND_UP},Pi={[0]:_e.roundDown,[1]:_e.roundHalfUp,[2]:_e.roundUp},C=class{numerator;denominator;constructor(t,n=new gi(1)){this.numerator=Y(t),this.denominator=Y(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new C(this.denominator,this.numerator)}add(t){let n=t instanceof C?t:new C(Y(t));return this.denominator.eq(n.denominator)?new C(this.numerator.add(n.numerator),this.denominator):new C(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(t){let n=t instanceof C?t:new C(Y(t));return this.denominator.eq(n.denominator)?new C(this.numerator.sub(n.numerator),this.denominator):new C(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(t){let n=t instanceof C?t:new C(Y(t));return new C(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(t){let n=t instanceof C?t:new C(Y(t));return new C(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(t,n={groupSeparator:""},i=1){Number.isInteger(t)||Ve.logWithError(`${t} is not an integer.`),t<=0&&Ve.logWithError(`${t} is not positive.`),we.set({precision:t+1,rounding:wi[i]});let r=new we(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return r.toFormat(r.decimalPlaces(),n)}toFixed(t,n={groupSeparator:""},i=1){return Number.isInteger(t)||Ve.logWithError(`${t} is not an integer.`),t<0&&Ve.logWithError(`${t} is negative.`),it.DP=t,it.RM=Pi[i]||1,new it(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,n)}isZero(){return this.numerator.isZero()}};var co=_("Raydium_amount"),uo=ge(Ai);import{PublicKey as Ti}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as _t}from"@solana/spl-token";var rt={chainId:101,address:Ti.default.toBase58(),programId:_t.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},se={chainId:101,address:"So11111111111111111111111111111111111111112",programId:_t.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as st}from"@solana/web3.js";import{PublicKey as K,SystemProgram as Wt,SYSVAR_RENT_PUBKEY as hi}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Bi}from"@solana/spl-token";function ot({pubkey:e,isSigner:t=!1,isWritable:n=!0}){return{pubkey:e,isWritable:n,isSigner:t}}var wo=[ot({pubkey:Bi,isWritable:!1}),ot({pubkey:Wt.programId,isWritable:!1}),ot({pubkey:hi,isWritable:!1})];function qt({publicKey:e,transformSol:t}){let n=Ut(e.toString());if(n instanceof K)return t&&n.equals(Pe)?De:n;if(t&&n.toString()===Pe.toBase58())return De;if(typeof n=="string"){if(n===K.default.toBase58())return K.default;try{return new K(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Ut(e){try{return new K(e)}catch{return e}}var xi=new K("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ii=new K("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Si=new K("SysvarRent111111111111111111111111111111111"),Po=new K("SysvarC1ock11111111111111111111111111111111"),Gt=new K("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Ao=new K("Sysvar1nstructions1111111111111111111111111"),ko=Wt.programId,To=new K("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),ho=new K("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Bo=new K("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),xo=new K("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Io=new K("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),So=new K("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Co=new K("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Ko=new K("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),No=new K("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Lo=new K("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Ro=new K("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),De=new K("So11111111111111111111111111111111111111112"),Pe=K.default;var at=class{symbol;name;decimals;isToken2022;mint;constructor({mint:t,decimals:n,symbol:i,name:r,skipMint:o=!1,isToken2022:s=!1}){if(t===Pe.toBase58()||t instanceof st&&Pe.equals(t)){this.decimals=se.decimals,this.symbol=se.symbol,this.name=se.name,this.mint=new st(se.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=i||t.toString().substring(0,6),this.name=r||t.toString().substring(0,6),this.mint=o?st.default:qt({publicKey:t}),this.isToken2022=s}equals(t){return this===t?!0:this.mint.equals(t.mint)}},ae=at;Ne(ae,"WSOL",new at({...se,mint:se.address}));var ct=class{symbol;name;decimals;constructor({decimals:t,symbol:n="UNKNOWN",name:i="UNKNOWN"}){this.decimals=t,this.symbol=n,this.name=i}equals(t){return this===t}},We=ct;Ne(We,"SOL",new ct(rt));import Ci from"bn.js";var Go=new C(new Ci(100));var Qo=_("Raydium_price");import{PublicKey as ps}from"@solana/web3.js";import bs from"bn.js";var Ki=new ee(0),Ms=new ee(1),Os=new ee(2),Fs=new ee(3),Es=new ee(5),ki=new ee(10),vs=new ee(100),Ds=new ee(1e3),Vs=new ee(1e4);import{PublicKey as la}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as da}from"@solana/spl-token";import{ComputeBudgetProgram as zs,Keypair as Qs,PublicKey as Ys,Transaction as $s,TransactionMessage as ta,VersionedTransaction as na}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as sa}from"@solana/spl-token";var aa=_("Raydium_txUtil");import{PublicKey as A}from"@solana/web3.js";var ga=new A("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),ya=new A("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),wa=new A("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Pa=new A("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Aa=new A("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),ka=new A("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Ta=new A("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),ha=new A("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Ba=new A("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),xa=new A("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Li=new A("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Ri=new A("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Mi=new A("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),Ia=new A("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Sa=new A("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Ca=new A("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Ka=new A("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Na=new A("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),La=new A("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Ra=new A("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Ma=new A("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Oa=new A("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Oi=new A("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),Fi=new A("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),Ei=new A("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2"),Fa=new A("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),vi=new A("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),Ea=new A("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Di=new A("7AFUeLVRjBfzqK3tTGw8hN48KLQWSk6DTE8xprWdPqix"),va=new A("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Da=new A("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Vi=new A("LanD8FpTBBvzZFXjTxsAoipkFsxPUCDB4qAqKxYDiNP"),_i=new A("HYNHiyKJ3gGVFvyxJAurK7qr7P2o5J9THmvCGMdULtpW");var Va={SERUM_MARKET:A.default,OPENBOOK_MARKET:new A("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),UTIL1216:A.default,FarmV3:new A("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),FarmV5:new A("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),FarmV6:new A("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),AmmV4:new A("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),AmmStable:new A("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),CLMM:new A("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),CLMM_LOCK_PROGRAM_ID:new A("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),CLMM_LOCK_AUTH_ID:new A("8qmHNvu2Kr2C7U8mJL4Vz1vTDxMhVuXKREwU7TNoaVEo"),Router:new A("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),CREATE_CPMM_POOL_PROGRAM:Oi,CREATE_CPMM_POOL_AUTH:Fi,CREATE_CPMM_POOL_FEE_ACC:Ei,FEE_DESTINATION_ID:new A("3XMrhbv989VxAMi3DErLV9eJht1pHppW5LbKxe9fkEFR"),LOCK_CPMM_PROGRAM:vi,LCOK_CPMM_AUTH:Di,LAUNCHPAD_PROGRAM:Vi,LAUNCHPAD_AUTH:_i};import Ue from"bn.js";function Xt(e,t){if(e.isZero())return new Ue(0);let n=e.div(t);return n.isZero()?new Ue(1):e.mod(t).gt(new Ue(0))?n.add(new Ue(1)):n}import{PublicKey as Wi,AddressLookupTableAccount as Ht}from"@solana/web3.js";var qi={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new Ht({key:new Wi("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:Ht.deserialize(Buffer.from("AQAAAP//////////I1rcEwAAAAAvAQYwun9CU6c5Ikm2pAj+D9IEnCOR45nK+SFTGSdpd6J6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbd9uHXZaGT2cvhRs7reawctIXtX1s3kTqM9YV+/wCpBt324e51j94YQl285GzN2rYa/E2DuQ0n/r35KNihi/wFSlNQ+F3IgtYUpVZyeIopbd8eq6vQpgZ4iEky9O72oAVKU1qZKSEGTSTocWDaOHx8NbXdvJK7geQfqEBBBUSNBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvBkX2T9y7AHdNGviJAqQNtlDUDCnauQRWybsLji6nPM8Qkw5asQRvCdB3MbX6IEBwytOrpM32l4jQygKG9TKgR0vZScQ2AsM/IHeQ7RajUkyhuZdc8SGiqQz/7H34torNR/Wir3sl0ruUrVxJWEZfUg+QLNAxxODdBi53/OP7Ioil1cqeBM9dtZC3FLov4yyxWRM/wcGStyJX/QfTnLBAHqkqWotPKVlShCVQqpP9W5W1rOao65IMk5QuQ2kMIOxzDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu/YsA/yfEEFGcr8Z57VKDw8uQzpiru7g4lvjnfapW62W030syevD8k07SGoxUHiuT/ai7gAHWWhDsVmg/C63ajgpkH7Sn3GdutArDTfyqOkdqv4/IPC/EFFy7mGkfDd2C57N5a/4jC+BbmJy7wQaSEZr0CQU88lPtUxIVvzGjC95b8Ooss2TqmkrayGKofkPMGQn7Ux+9lfwBSNfxwH8NgbpqC/7LNlV4I7nCvsXf3p+ohQk9NrAJb2KAFpUqEIJ9ZBV7BYDzHF/ORKYlgtvPnXjudZQ6CEo5OzUDaNIomTCCsvhD16TxJjsbgne1kGnQPCFSoaxUbq2V1bPMFQ3VYP6wDZ9bKStCFKx9A3tNbwZFC5ZGAN83MFK7XoTy+OmmcFEr6rLOjfSuTfPvHJkSVxW6Qllwkl67XcBi5v00u2gQsbu+38sp+rd5pA/LvyWj4P94ZGZwc1tE2P88xekCLcAwZGb+UhFzL/7K26csOb57yM5bvF9xJrLEObOkAAAAAn+HWRkdcPKyFFMnVwEoD7vnD0jCKFIU1sImubYCxNTSVzsKpaQX+fzNxrLAI3L14JQnJx/D6Uk2LADIHGqnGELzjEbkBDAlaM77NkXMPfqXNLSveCkWI7UEgNs31WEWB6XHSYI/v5DklHOb4QTtDOR804PVbi3fjloZeLR2F8d4FuZmMMO7ck3Fnkn2zEMG5gOmqsygb6PjTitArVl52NhcSznTxVnguaIJxiZkAnurDmn3MWR0PC2GLghp2KJqHCc6QQ85odeIjFHKOlRlJyeSXVJmL8vb1UgOzsbJPVP8p6zM4M3C1Sd7uWIHP33G42AP2Zg8ucn/n6meQjjD266JgCWdxZD6PXs9CsnIeL7SSG0/6lGb9xfP0ZcWkCXB/3hjxHYVXjra/GPOeXGk0fLLKjCbk+mgs2w6d2oCwimBipTzuoZ30GiI8ij8VRzD5CzMWtu2m21eDBIfjGAEo4pQeNNonKcqzV/cleX8ySZLOHsz8PtBCrLqF+VkLm9hOzIT+6i/nIf6keR4GWKMOD4AvqfpjHoD4DuhBpz8P28+DxkGrDXXr/nr20x291VPvcTU/b+b+o2kC9G0kcXeTlLjU6a2TQXWlZ4gBUdBl1jgT7mObSTpLblNiXZsLkbmVXZwvFKXua5cUKlWed/w30skmEUraTuQqtqr5fHZPW9n57EmeTif6LjHL2YJFZkQU+TrJmFzqzmF4/b8OwrPQAprl8mX3q4LUIdAS/a+11B6DWD1Xk2++Sn94dLC4xjkO4Wtlw8c4XuzciVbepHOmnoWzVu/0y3KCrLCSfQxQ3br8DJCoVzhgtPsS2nZZjsBGIZgnU0QpMv+2MnRsnKwdp1VsrCX84j/qvaZn4WhKunippgTbN2EUs0tPTP55Qfgj+nKmjtWW5IYs72FrEwJKYoNfsmqaF4o5pf4v9zgPwVwY/5I4XJKUL2L25m9kAQcW/K+H1RTFEUoj8Z4ajpOmAB/dG0COmCphVMW2CCMvnxhcGiSgPnpDuWu6qiJ7NG7ye5kvHgefgqPLeicspNJ5EpL3XiRNLM2tmJLI1awAwOyd6iHv0dCkMYRKaa6rcaZeYwmKCkckm0kM2JNmnmmAaBQQ7mwmIM0IMxX4f5W6j9PqZWcJxF7r17T/lQBAmcjoupRiJifbnXCNUv9GhpRF19WcBdeKbivRJVlGop6I2RS6lGImJ9udcI1S/0aGlEXX1ZwF14puK9ElWUainojZFYVHLHD6dIP2ESjqBzg3ol1/wB7+/ylGwd9LS7wSZ2A630CJSVKwH47K9P4bB8PEQP8BwjMFa7xQHOqZFP1XqaQ==","base64"))})};import{PublicKey as ic,sendAndConfirmTransaction as rc,SystemProgram as ac,Transaction as cc,TransactionMessage as lc,VersionedTransaction as mc}from"@solana/web3.js";import pc from"axios";import Gi from"bn.js";var Ac=new Gi(1e6);var Ge=class{static getPoolInitPriceByPool({poolInfo:t,decimalA:n,decimalB:i}){throw Error()}static getPoolInitPriceByInit({a:t,b:n,decimalA:i,decimalB:r}){throw Error()}static getPoolPrice({poolInfo:t,decimalA:n,decimalB:i}){throw Error()}static getPoolEndPrice({supply:t,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){throw Error()}static getPoolEndPriceReal({poolInfo:t,decimalA:n,decimalB:i}){throw Error()}static getInitParam({supply:t,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){throw Error()}static buyExactIn({poolInfo:t,amount:n}){throw Error()}static buyExactOut({poolInfo:t,amount:n}){throw Error()}static sellExactIn({poolInfo:t,amount:n}){throw Error()}static sellExactOut({poolInfo:t,amount:n}){throw Error()}};import{PublicKey as _d}from"@solana/web3.js";import qd from"bn.js";import{AccountLayout as Hd,TOKEN_2022_PROGRAM_ID as zd,TOKEN_PROGRAM_ID as jd}from"@solana/spl-token";import{PublicKey as Gc}from"@solana/web3.js";import{MintLayout as Hc,TOKEN_PROGRAM_ID as jc}from"@solana/spl-token";import{Keypair as ud,PublicKey as ld,SystemProgram as dd,TransactionInstruction as pd}from"@solana/web3.js";import bd from"bn.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as wd,TOKEN_2022_PROGRAM_ID as Pd,TOKEN_PROGRAM_ID as Ad}from"@solana/spl-token";import{PublicKey as $i}from"@solana/web3.js";import Yt,{isBN as Jt}from"bn.js";import{bits as su,BitStructure as au,blob as Xi,Blob as cu,cstr as uu,f32 as lu,f32be as mu,f64 as du,f64be as pu,greedy as fu,Layout as Hi,ns64 as bu,ns64be as gu,nu64 as yu,nu64be as wu,offset as Pu,s16 as Au,s16be as ku,s24 as Tu,s24be as hu,s32 as zi,s32be as Bu,s40 as xu,s40be as Iu,s48 as Su,s48be as Cu,s8 as Ku,seq as ji,struct as Nu,Structure as Zi,u16 as Qi,u16be as Lu,u24 as Ru,u24be as Mu,u32 as Ou,u32be as Fu,u40 as Eu,u40be as vu,u48 as Du,u48be as Vu,u8 as Yi,UInt as Ji,union as _u,Union as Wu,unionLayoutDiscriminator as qu,utf8 as Uu}from"@solana/buffer-layout";var dt=Hi,jt=Zi;var pt=Ji;var Zt=Yi,Ae=Qi;var te=zi;var Qt=ji;var U=Xi;var le=class extends dt{blob;signed;constructor(t,n,i){super(t,i),this.blob=U(t),this.signed=n}decode(t,n=0){let i=new Yt(this.blob.decode(t,n),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,n,i=0){return typeof t=="number"&&(t=new Yt(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),n,i)}};function W(e){return new pt(1,e)}function me(e){return new pt(4,e)}function T(e){return new le(8,!1,e)}function N(e){return new le(16,!1,e)}function $t(e){return new le(8,!0,e)}function en(e){return new le(16,!0,e)}var Xe=class extends dt{layout;decoder;encoder;constructor(t,n,i,r){super(t.span,r),this.layout=t,this.decoder=n,this.encoder=i}decode(t,n){return this.decoder(this.layout.decode(t,n))}encode(t,n,i){return this.layout.encode(this.encoder(t),n,i)}getSpan(t,n){return this.layout.getSpan(t,n)}};function B(e){return new Xe(U(32),t=>new $i(t),t=>t.toBuffer(),e)}function bt(e){return new Xe(Zt(),er,tr,e)}function er(e){if(e===0)return!1;if(e===1)return!0;throw new Error("Invalid bool: "+e)}function tr(e){return e?1:0}var ft=class extends jt{decode(t,n){return super.decode(t,n)}};function D(e,t,n){return new ft(e,t,n)}function L(e,t,n){let i,r=typeof t=="number"?t:Jt(t)?t.toNumber():new Proxy(t,{get(o,s){if(!i){let a=Reflect.get(o,"count");i=Jt(a)?a.toNumber():a,Reflect.set(o,"count",i)}return Reflect.get(o,s)},set(o,s,a){return s==="count"&&(i=a),Reflect.set(o,s,a)}});return Qt(e,r,n)}import Wm from"bn.js";import X from"bn.js";var gt=new X(0),tn=new X(1),nn=new X(-1),ke=new X(1).shln(64),rn=new X(1).shln(128),nr=ke.sub(tn);var ir=rn.subn(1),de=-443636,Te=-de,yt=new X("4295048016"),wt=new X("79226673521066979257578248091"),il=new X("4295048017"),rl=new X("79226673521066979257578248090");var rr=new X(10).pow(new X(6));var ol=new X("18446744073700000000");import Sm from"bn.js";var dl=Buffer.from("amm_config","utf8"),pl=Buffer.from("pool","utf8"),fl=Buffer.from("pool_vault","utf8"),bl=Buffer.from("pool_reward_vault","utf8"),gl=Buffer.from("position","utf8"),yl=Buffer.from("tick_array","utf8"),wl=Buffer.from("operation","utf8"),Pl=Buffer.from("pool_tick_array_bitmap_extension","utf8"),Al=Buffer.from("observation","utf8");var kl=Buffer.from("locked_position","utf8");var Tl=Buffer.from("support_mint","utf8");import{PublicKey as tm}from"@solana/web3.js";import{TOKEN_2022_PROGRAM_ID as im}from"@solana/spl-token";import om from"bn.js";import xl from"bn.js";var kt=14;var He=60;var ur=D([U(8),W("bump"),Ae("index"),B(""),me("protocolFeeRate"),me("tradeFeeRate"),Ae("tickSpacing"),L(T(),8,"")]),lr=D([me("blockTimestamp"),$t("tickCumulative"),L(T(),4)]),fn=D([U(8),bt("initialized"),T("recentEpoch"),Ae("observationIndex"),B("poolId"),L(lr,100,"observations"),L(T(),4)]),mr=D([W("rewardState"),T("openTime"),T("endTime"),T("lastUpdateTime"),N("emissionsPerSecondX64"),T("rewardTotalEmissioned"),T("rewardClaimed"),B("tokenMint"),B("tokenVault"),B("creator"),N("rewardGrowthGlobalX64")]),mn=D([U(8),W("bump"),B("ammConfig"),B("creator"),B("mintA"),B("mintB"),B("vaultA"),B("vaultB"),B("observationId"),W("mintDecimalsA"),W("mintDecimalsB"),Ae("tickSpacing"),N("liquidity"),N("sqrtPriceX64"),te("tickCurrent"),me(),N("feeGrowthGlobalX64A"),N("feeGrowthGlobalX64B"),T("protocolFeesTokenA"),T("protocolFeesTokenB"),N("swapInAmountTokenA"),N("swapOutAmountTokenB"),N("swapInAmountTokenB"),N("swapOutAmountTokenA"),W("status"),L(W(),7,""),L(mr,3,"rewardInfos"),L(T(),16,"tickArrayBitmap"),T("totalFeesTokenA"),T("totalFeesClaimedTokenA"),T("totalFeesTokenB"),T("totalFeesClaimedTokenB"),T("fundFeesTokenA"),T("fundFeesTokenB"),T("startTime"),L(T(),15*4-3,"padding")]),dr=D([N("growthInsideLastX64"),T("rewardAmountOwed")]),dn=D([U(8),W("bump"),B("nftMint"),B("poolId"),te("tickLower"),te("tickUpper"),N("liquidity"),N("feeGrowthInsideLastX64A"),N("feeGrowthInsideLastX64B"),T("tokenFeesOwedA"),T("tokenFeesOwedB"),L(dr,3,"rewardInfos"),L(T(),8,"")]),Ym=D([U(8),W("bump"),B("poolId"),te("tickLowerIndex"),te("tickUpperIndex"),N("liquidity"),N("feeGrowthInsideLastX64A"),N("feeGrowthInsideLastX64B"),T("tokenFeesOwedA"),T("tokenFeesOwedB"),L(N(),3,"rewardGrowthInside"),L(T(),8,"")]),pr=D([te("tick"),en("liquidityNet"),N("liquidityGross"),N("feeGrowthOutsideX64A"),N("feeGrowthOutsideX64B"),L(N(),3,"rewardGrowthsOutsideX64"),L(me(),13,"")]),cn=D([U(8),B("poolId"),te("startTickIndex"),L(pr,He,"ticks"),W("initializedTickCount"),L(W(),115,"")]),fr=D([U(329),L(B(),100,"whitelistMints")]),cr=D([U(8),B("poolId"),L(L(T(),8),kt,"positiveTickArrayBitmap"),L(L(T(),8),kt,"negativeTickArrayBitmap")]),Jm=D([T(),W("bump"),B("owner"),B("poolId"),B("positionId"),B("nftAccount"),L(T(),8)]),$m=D([U(8),W("bump"),B("lockOwner"),B("poolId"),B("positionId"),B("nftAccount"),B("lockNftMint"),T("recentEpoch"),L(T(),8)]);fn.span;var Kd=_("Raydium_Clmm");var bn=class extends Ge{static getPoolInitPriceByPool({poolInfo:t,decimalA:n,decimalB:i}){return new G(t.virtualB.toString()).div(t.virtualA.toString()).mul(10**(n-i))}static getPoolInitPriceByInit({a:t,b:n,decimalA:i,decimalB:r}){return new G(n.toString()).div(t.toString()).mul(10**(i-r))}static getPoolPrice({poolInfo:t,decimalA:n,decimalB:i}){return new G(t.virtualB.add(t.realB).toString()).div(t.virtualA.sub(t.realA).toString()).mul(10**(n-i))}static getPoolEndPrice({supply:t,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new G(r.sub(o).toString()).div(t.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:t,decimalA:n,decimalB:i}){let r=t.totalSellA.sub(t.realA),o=t.totalFundRaisingB.sub(t.realB);return new G(t.virtualB.add(t.realB.add(o)).toString()).div(t.virtualA.sub(t.realA.add(r)).toString()).mul(10**(n-i))}static getInitParam({supply:t,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){if(t.lte(i))throw Error("supply need gt total sell");let s=t.sub(i).sub(r);if(s.lte(new xe(0)))throw Error("supplyMinusSellLocked <= 0");let a=n.sub(o);if(a.lte(new xe(0)))throw Error("tfMinusMf <= 0");let u=a.mul(i).mul(i).div(s),c=a.mul(i).div(s).sub(n);if(c.lt(new xe(0)))throw Error("supply/totalSell/totalLockedAmount diff too high");let l=u.div(c),m=n.mul(n).div(c);if(l.lt(new xe(0))||m.lt(new xe(0)))throw Error("invalid input 0");return{a:l,b:m,c:i}}static buyExactIn({poolInfo:t,amount:n}){return this.getAmountOut({amountIn:n,inputReserve:t.virtualB.add(t.realB),outputReserve:t.virtualA.sub(t.realA)})}static buyExactOut({poolInfo:t,amount:n}){return this.getAmountIn({amountOut:n,inputReserve:t.virtualB.add(t.realB),outputReserve:t.virtualA.sub(t.realA)})}static sellExactIn({poolInfo:t,amount:n}){return this.getAmountOut({amountIn:n,inputReserve:t.virtualA.sub(t.realA),outputReserve:t.virtualB.add(t.realB)})}static sellExactOut({poolInfo:t,amount:n}){return this.getAmountIn({amountOut:n,inputReserve:t.virtualA.sub(t.realA),outputReserve:t.virtualB.add(t.realB)})}static getAmountOut({amountIn:t,inputReserve:n,outputReserve:i}){let r=t.mul(i),o=n.add(t);return r.div(o)}static getAmountIn({amountOut:t,inputReserve:n,outputReserve:i}){let r=n.mul(t),o=i.sub(t);return Xt(r,o)}};export{bn as LaunchPadConstantProductCurve,ke as Q64};
//# sourceMappingURL=constantProductCurve.mjs.map