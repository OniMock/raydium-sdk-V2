var Sn=Object.defineProperty;var Cn=(t,e,n)=>e in t?Sn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>(Cn(t,typeof e!="symbol"?e+"":e,n),n);import ne from"bn.js";import Re from"bn.js";var be=9e15,ue=1e9,ot="0123456789abcdef",De="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ve="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",st={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-be,maxE:be,crypto:!1},Ot,ie,h=!0,We="[DecimalError] ",ae=We+"Invalid argument: ",vt=We+"Precision limit exceeded",Et=We+"crypto unavailable",Dt="[object Decimal]",_=Math.floor,v=Math.pow,Kn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Nn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Ln=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Vt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Y=1e7,P=7,Rn=9007199254740991,Mn=De.length-1,at=Ve.length-1,p={toStringTag:Dt};p.absoluteValue=p.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),b(t)};p.ceil=function(){return b(new this.constructor(this),this.e+1,2)};p.clampedTo=p.clamp=function(t,e){var n,i=this,r=i.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(ae+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new r(i)};p.comparedTo=p.cmp=function(t){var e,n,i,r,o=this,s=o.d,a=(t=new o.constructor(t)).d,c=o.s,u=t.s;if(!s||!a)return!c||!u?NaN:c!==u?c:s===a?0:!s^c<0?1:-1;if(!s[0]||!a[0])return s[0]?c:a[0]?-u:0;if(c!==u)return c;if(o.e!==t.e)return o.e>t.e^c<0?1:-1;for(i=s.length,r=a.length,e=0,n=i<r?i:r;e<n;++e)if(s[e]!==a[e])return s[e]>a[e]^c<0?1:-1;return i===r?0:i>r^c<0?1:-1};p.cosine=p.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+P,i.rounding=1,n=Fn(i,Gt(i,n)),i.precision=t,i.rounding=e,b(ie==2||ie==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};p.cubeRoot=p.cbrt=function(){var t,e,n,i,r,o,s,a,c,u,l=this,m=l.constructor;if(!l.isFinite()||l.isZero())return new m(l);for(h=!1,o=l.s*v(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=D(l.d),t=l.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=v(n,1/3),t=_((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new m(n),i.s=l.s):i=new m(o.toString()),s=(t=m.precision)+3;;)if(a=i,c=a.times(a).times(a),u=c.plus(l),i=C(u.plus(l).times(a),u.plus(c),s+2,1),D(a.d).slice(0,s)===(n=D(i.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!r&&n=="4999"){if(!r&&(b(a,t+1,0),a.times(a).times(a).eq(l))){i=a;break}s+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(b(i,t+1,1),e=!i.times(i).times(i).eq(l));break}return h=!0,b(i,t,m.rounding,e)};p.decimalPlaces=p.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-_(this.e/P))*P,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};p.dividedBy=p.div=function(t){return C(this,new this.constructor(t))};p.dividedToIntegerBy=p.divToInt=function(t){var e=this,n=e.constructor;return b(C(e,new n(t),0,1,1),n.precision,n.rounding)};p.equals=p.eq=function(t){return this.cmp(t)===0};p.floor=function(){return b(new this.constructor(this),this.e+1,3)};p.greaterThan=p.gt=function(t){return this.cmp(t)>0};p.greaterThanOrEqualTo=p.gte=function(t){var e=this.cmp(t);return e==1||e===0};p.hyperbolicCosine=p.cosh=function(){var t,e,n,i,r,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,i=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,r=o.d.length,r<32?(t=Math.ceil(r/3),e=(1/Ue(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=ge(s,1,o.times(e),new s(1),!0);for(var c,u=t,l=new s(8);u--;)c=o.times(o),o=a.minus(c.times(l.minus(c.times(l))));return b(o,s.precision=n,s.rounding=i,!0)};p.hyperbolicSine=p.sinh=function(){var t,e,n,i,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(r.e,r.sd())+4,o.rounding=1,i=r.d.length,i<3)r=ge(o,2,r,r,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,r=r.times(1/Ue(5,t)),r=ge(o,2,r,r,!0);for(var s,a=new o(5),c=new o(16),u=new o(20);t--;)s=r.times(r),r=r.times(a.plus(s.times(c.times(s).plus(u))))}return o.precision=e,o.rounding=n,b(r,e,n,!0)};p.hyperbolicTangent=p.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,C(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};p.inverseCosine=p.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),r=n.precision,o=n.rounding;return i!==-1?i===0?e.isNeg()?Q(n,r,o):new n(0):new n(NaN):e.isZero()?Q(n,r+4,o).times(.5):(n.precision=r+6,n.rounding=1,e=e.asin(),t=Q(n,r+4,o).times(.5),n.precision=r,n.rounding=o,t.minus(e))};p.inverseHyperbolicCosine=p.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,h=!1,n=n.times(n).minus(1).sqrt().plus(n),h=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};p.inverseHyperbolicSine=p.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,h=!1,n=n.times(n).plus(1).sqrt().plus(n),h=!0,i.precision=t,i.rounding=e,n.ln())};p.inverseHyperbolicTangent=p.atanh=function(){var t,e,n,i,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(t=o.precision,e=o.rounding,i=r.sd(),Math.max(i,t)<2*-r.e-1?b(new o(r),t,e,!0):(o.precision=n=i-r.e,r=C(r.plus(1),new o(1).minus(r),n+t,1),o.precision=t+4,o.rounding=1,r=r.ln(),o.precision=t,o.rounding=e,r.times(.5))):new o(NaN)};p.inverseSine=p.asin=function(){var t,e,n,i,r=this,o=r.constructor;return r.isZero()?new o(r):(e=r.abs().cmp(1),n=o.precision,i=o.rounding,e!==-1?e===0?(t=Q(o,n+4,i).times(.5),t.s=r.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,r.times(2)))};p.inverseTangent=p.atan=function(){var t,e,n,i,r,o,s,a,c,u=this,l=u.constructor,m=l.precision,d=l.rounding;if(u.isFinite()){if(u.isZero())return new l(u);if(u.abs().eq(1)&&m+4<=at)return s=Q(l,m+4,d).times(.25),s.s=u.s,s}else{if(!u.s)return new l(NaN);if(m+4<=at)return s=Q(l,m+4,d).times(.5),s.s=u.s,s}for(l.precision=a=m+10,l.rounding=1,n=Math.min(28,a/P+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(h=!1,e=Math.ceil(a/P),i=1,c=u.times(u),s=new l(u),r=u;t!==-1;)if(r=r.times(c),o=s.minus(r.div(i+=2)),r=r.times(c),s=o.plus(r.div(i+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===o.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),h=!0,b(s,l.precision=m,l.rounding=d,!0)};p.isFinite=function(){return!!this.d};p.isInteger=p.isInt=function(){return!!this.d&&_(this.e/P)>this.d.length-2};p.isNaN=function(){return!this.s};p.isNegative=p.isNeg=function(){return this.s<0};p.isPositive=p.isPos=function(){return this.s>0};p.isZero=function(){return!!this.d&&this.d[0]===0};p.lessThan=p.lt=function(t){return this.cmp(t)<0};p.lessThanOrEqualTo=p.lte=function(t){return this.cmp(t)<1};p.logarithm=p.log=function(t){var e,n,i,r,o,s,a,c,u=this,l=u.constructor,m=l.precision,d=l.rounding,f=5;if(t==null)t=new l(10),e=!0;else{if(t=new l(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new l(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new l(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(r=n[0];r%10===0;)r/=10;o=r!==1}if(h=!1,a=m+f,s=se(u,a),i=e?_e(l,a+10):se(t,a),c=C(s,i,a,1),ke(c.d,r=m,d))do if(a+=10,s=se(u,a),i=e?_e(l,a+10):se(t,a),c=C(s,i,a,1),!o){+D(c.d).slice(r+1,r+15)+1==1e14&&(c=b(c,m+1,0));break}while(ke(c.d,r+=10,d));return h=!0,b(c,m,d)};p.minus=p.sub=function(t){var e,n,i,r,o,s,a,c,u,l,m,d,f=this,A=f.constructor;if(t=new A(t),!f.d||!t.d)return!f.s||!t.s?t=new A(NaN):f.d?t.s=-t.s:t=new A(t.d||f.s!==t.s?f:NaN),t;if(f.s!=t.s)return t.s=-t.s,f.plus(t);if(u=f.d,d=t.d,a=A.precision,c=A.rounding,!u[0]||!d[0]){if(d[0])t.s=-t.s;else if(u[0])t=new A(f);else return new A(c===3?-0:0);return h?b(t,a,c):t}if(n=_(t.e/P),l=_(f.e/P),u=u.slice(),o=l-n,o){for(m=o<0,m?(e=u,o=-o,s=d.length):(e=d,n=l,s=u.length),i=Math.max(Math.ceil(a/P),s)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=u.length,s=d.length,m=i<s,m&&(s=i),i=0;i<s;i++)if(u[i]!=d[i]){m=u[i]<d[i];break}o=0}for(m&&(e=u,u=d,d=e,t.s=-t.s),s=u.length,i=d.length-s;i>0;--i)u[s++]=0;for(i=d.length;i>o;){if(u[--i]<d[i]){for(r=i;r&&u[--r]===0;)u[r]=Y-1;--u[r],u[i]+=Y}u[i]-=d[i]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=qe(u,n),h?b(t,a,c):t):new A(c===3?-0:0)};p.modulo=p.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?b(new i(n),i.precision,i.rounding):(h=!1,i.modulo==9?(e=C(n,t.abs(),0,3,1),e.s*=t.s):e=C(n,t,0,i.modulo,1),e=e.times(t),h=!0,n.minus(e))};p.naturalExponential=p.exp=function(){return ut(this)};p.naturalLogarithm=p.ln=function(){return se(this)};p.negated=p.neg=function(){var t=new this.constructor(this);return t.s=-t.s,b(t)};p.plus=p.add=function(t){var e,n,i,r,o,s,a,c,u,l,m=this,d=m.constructor;if(t=new d(t),!m.d||!t.d)return!m.s||!t.s?t=new d(NaN):m.d||(t=new d(t.d||m.s===t.s?m:NaN)),t;if(m.s!=t.s)return t.s=-t.s,m.minus(t);if(u=m.d,l=t.d,a=d.precision,c=d.rounding,!u[0]||!l[0])return l[0]||(t=new d(m)),h?b(t,a,c):t;if(o=_(m.e/P),i=_(t.e/P),u=u.slice(),r=o-i,r){for(r<0?(n=u,r=-r,s=l.length):(n=l,i=o,s=u.length),o=Math.ceil(a/P),s=o>s?o+1:s+1,r>s&&(r=s,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(s=u.length,r=l.length,s-r<0&&(r=s,n=l,l=u,u=n),e=0;r;)e=(u[--r]=u[r]+l[r]+e)/Y|0,u[r]%=Y;for(e&&(u.unshift(e),++i),s=u.length;u[--s]==0;)u.pop();return t.d=u,t.e=qe(u,i),h?b(t,a,c):t};p.precision=p.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ae+t);return n.d?(e=_t(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};p.round=function(){var t=this,e=t.constructor;return b(new e(t),t.e+1,e.rounding)};p.sine=p.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+P,i.rounding=1,n=vn(i,Gt(i,n)),i.precision=t,i.rounding=e,b(ie>2?n.neg():n,t,e,!0)):new i(NaN)};p.squareRoot=p.sqrt=function(){var t,e,n,i,r,o,s=this,a=s.d,c=s.e,u=s.s,l=s.constructor;if(u!==1||!a||!a[0])return new l(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);for(h=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=D(a),(e.length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=_((c+1)/2)-(c<0||c%2),u==1/0?e="5e"+c:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),i=new l(e)):i=new l(u.toString()),n=(c=l.precision)+3;;)if(o=i,i=o.plus(C(s,o,n+2,1)).times(.5),D(o.d).slice(0,n)===(e=D(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!r&&e=="4999"){if(!r&&(b(o,c+1,0),o.times(o).eq(s))){i=o;break}n+=4,r=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(b(i,c+1,1),t=!i.times(i).eq(s));break}return h=!0,b(i,c,l.rounding,t)};p.tangent=p.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=C(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,b(ie==2||ie==4?n.neg():n,t,e,!0)):new i(NaN)};p.times=p.mul=function(t){var e,n,i,r,o,s,a,c,u,l=this,m=l.constructor,d=l.d,f=(t=new m(t)).d;if(t.s*=l.s,!d||!d[0]||!f||!f[0])return new m(!t.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:!d||!f?t.s/0:t.s*0);for(n=_(l.e/P)+_(t.e/P),c=d.length,u=f.length,c<u&&(o=d,d=f,f=o,s=c,c=u,u=s),o=[],s=c+u,i=s;i--;)o.push(0);for(i=u;--i>=0;){for(e=0,r=c+i;r>i;)a=o[r]+f[i]*d[r-i-1]+e,o[r--]=a%Y|0,e=a/Y|0;o[r]=(o[r]+e)%Y|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=qe(o,n),h?b(t,m.precision,m.rounding):t};p.toBinary=function(t,e){return lt(this,2,t,e)};p.toDecimalPlaces=p.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(G(t,0,ue),e===void 0?e=i.rounding:G(e,0,8),b(n,t+n.e+1,e))};p.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=$(i,!0):(G(t,0,ue),e===void 0?e=r.rounding:G(e,0,8),i=b(new r(i),t+1,e),n=$(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};p.toFixed=function(t,e){var n,i,r=this,o=r.constructor;return t===void 0?n=$(r):(G(t,0,ue),e===void 0?e=o.rounding:G(e,0,8),i=b(new o(r),t+r.e+1,e),n=$(i,!1,t+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};p.toFraction=function(t){var e,n,i,r,o,s,a,c,u,l,m,d,f=this,A=f.d,w=f.constructor;if(!A)return new w(f);if(u=n=new w(1),i=c=new w(0),e=new w(i),o=e.e=_t(A)-f.e-1,s=o%P,e.d[0]=v(10,s<0?P+s:s),t==null)t=o>0?e:u;else{if(a=new w(t),!a.isInt()||a.lt(u))throw Error(ae+a);t=a.gt(e)?o>0?e:u:a}for(h=!1,a=new w(D(A)),l=w.precision,w.precision=o=A.length*P*2;m=C(a,e,0,1,1),r=n.plus(m.times(i)),r.cmp(t)!=1;)n=i,i=r,r=u,u=c.plus(m.times(r)),c=r,r=e,e=a.minus(m.times(r)),a=r;return r=C(t.minus(n),i,0,1,1),c=c.plus(r.times(u)),n=n.plus(r.times(i)),c.s=u.s=f.s,d=C(u,i,o,1).minus(f).abs().cmp(C(c,n,o,1).minus(f).abs())<1?[u,i]:[c,n],w.precision=l,h=!0,d};p.toHexadecimal=p.toHex=function(t,e){return lt(this,16,t,e)};p.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:G(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(h=!1,n=C(n,t,0,e,1).times(t),h=!0,b(n)):(t.s=n.s,n=t),n};p.toNumber=function(){return+this};p.toOctal=function(t,e){return lt(this,8,t,e)};p.toPower=p.pow=function(t){var e,n,i,r,o,s,a=this,c=a.constructor,u=+(t=new c(t));if(!a.d||!t.d||!a.d[0]||!t.d[0])return new c(v(+a,u));if(a=new c(a),a.eq(1))return a;if(i=c.precision,o=c.rounding,t.eq(1))return b(a,i,o);if(e=_(t.e/P),e>=t.d.length-1&&(n=u<0?-u:u)<=Rn)return r=Wt(c,a,n,i),t.s<0?new c(1).div(r):b(r,i,o);if(s=a.s,s<0){if(e<t.d.length-1)return new c(NaN);if((t.d[e]&1)==0&&(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=v(+a,u),e=n==0||!isFinite(n)?_(u*(Math.log("0."+D(a.d))/Math.LN10+a.e+1)):new c(n+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?s/0:0):(h=!1,c.rounding=a.s=1,n=Math.min(12,(e+"").length),r=ut(t.times(se(a,i+n)),i),r.d&&(r=b(r,i+5,1),ke(r.d,i,o)&&(e=i+10,r=b(ut(t.times(se(a,e+n)),e),e+5,1),+D(r.d).slice(i+1,i+15)+1==1e14&&(r=b(r,i+1,0)))),r.s=s,h=!0,c.rounding=o,b(r,i,o))};p.toPrecision=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=$(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(G(t,1,ue),e===void 0?e=r.rounding:G(e,0,8),i=b(new r(i),t,e),n=$(i,t<=i.e||i.e<=r.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};p.toSignificantDigits=p.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(G(t,1,ue),e===void 0?e=i.rounding:G(e,0,8)),b(new i(n),t,e)};p.toString=function(){var t=this,e=t.constructor,n=$(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};p.truncated=p.trunc=function(){return b(new this.constructor(this),this.e+1,1)};p.valueOf=p.toJSON=function(){var t=this,e=t.constructor,n=$(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function D(t){var e,n,i,r=t.length-1,o="",s=t[0];if(r>0){for(o+=s,e=1;e<r;e++)i=t[e]+"",n=P-i.length,n&&(o+=oe(n)),o+=i;s=t[e],i=s+"",n=P-i.length,n&&(o+=oe(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function G(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ae+t)}function ke(t,e,n,i){var r,o,s,a;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=P,r=0):(r=Math.ceil((e+1)/P),e%=P),o=v(10,P-e),a=t[r]%o|0,i==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(t[r+1]/o/100|0)==v(10,e-2)-1||(a==o/2||a==0)&&(t[r+1]/o/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),s=(i||n<4)&&a==9999||!i&&n>3&&a==4999):s=((i||n<4)&&a+1==o||!i&&n>3&&a+1==o/2)&&(t[r+1]/o/1e3|0)==v(10,e-3)-1,s}function Ee(t,e,n){for(var i,r=[0],o,s=0,a=t.length;s<a;){for(o=r.length;o--;)r[o]*=e;for(r[0]+=ot.indexOf(t.charAt(s++)),i=0;i<r.length;i++)r[i]>n-1&&(r[i+1]===void 0&&(r[i+1]=0),r[i+1]+=r[i]/n|0,r[i]%=n)}return r.reverse()}function Fn(t,e){var n,i,r;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),r=(1/Ue(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),t.precision+=n,e=ge(t,1,e.times(r),new t(1));for(var o=n;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}var C=function(){function t(i,r,o){var s,a=0,c=i.length;for(i=i.slice();c--;)s=i[c]*r+a,i[c]=s%o|0,a=s/o|0;return a&&i.unshift(a),i}function e(i,r,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(i[a]!=r[a]){c=i[a]>r[a]?1:-1;break}return c}function n(i,r,o,s){for(var a=0;o--;)i[o]-=a,a=i[o]<r[o]?1:0,i[o]=a*s+i[o]-r[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,o,s,a,c){var u,l,m,d,f,A,w,F,I,E,B,O,pe,z,Ae,Fe,he,it,j,Oe,ve=i.constructor,rt=i.s==r.s?1:-1,V=i.d,K=r.d;if(!V||!V[0]||!K||!K[0])return new ve(!i.s||!r.s||(V?K&&V[0]==K[0]:!K)?NaN:V&&V[0]==0||!K?rt*0:rt/0);for(c?(f=1,l=i.e-r.e):(c=Y,f=P,l=_(i.e/f)-_(r.e/f)),j=K.length,he=V.length,I=new ve(rt),E=I.d=[],m=0;K[m]==(V[m]||0);m++);if(K[m]>(V[m]||0)&&l--,o==null?(z=o=ve.precision,s=ve.rounding):a?z=o+(i.e-r.e)+1:z=o,z<0)E.push(1),A=!0;else{if(z=z/f+2|0,m=0,j==1){for(d=0,K=K[0],z++;(m<he||d)&&z--;m++)Ae=d*c+(V[m]||0),E[m]=Ae/K|0,d=Ae%K|0;A=d||m<he}else{for(d=c/(K[0]+1)|0,d>1&&(K=t(K,d,c),V=t(V,d,c),j=K.length,he=V.length),Fe=j,B=V.slice(0,j),O=B.length;O<j;)B[O++]=0;Oe=K.slice(),Oe.unshift(0),it=K[0],K[1]>=c/2&&++it;do d=0,u=e(K,B,j,O),u<0?(pe=B[0],j!=O&&(pe=pe*c+(B[1]||0)),d=pe/it|0,d>1?(d>=c&&(d=c-1),w=t(K,d,c),F=w.length,O=B.length,u=e(w,B,F,O),u==1&&(d--,n(w,j<F?Oe:K,F,c))):(d==0&&(u=d=1),w=K.slice()),F=w.length,F<O&&w.unshift(0),n(B,w,O,c),u==-1&&(O=B.length,u=e(K,B,j,O),u<1&&(d++,n(B,j<O?Oe:K,O,c))),O=B.length):u===0&&(d++,B=[0]),E[m++]=d,u&&B[0]?B[O++]=V[Fe]||0:(B=[V[Fe]],O=1);while((Fe++<he||B[0]!==void 0)&&z--);A=B[0]!==void 0}E[0]||E.shift()}if(f==1)I.e=l,Ot=A;else{for(m=1,d=E[0];d>=10;d/=10)m++;I.e=m+l*f-1,b(I,a?o+I.e+1:o,s,A)}return I}}();function b(t,e,n,i){var r,o,s,a,c,u,l,m,d,f=t.constructor;e:if(e!=null){if(m=t.d,!m)return t;for(r=1,a=m[0];a>=10;a/=10)r++;if(o=e-r,o<0)o+=P,s=e,l=m[d=0],c=l/v(10,r-s-1)%10|0;else if(d=Math.ceil((o+1)/P),a=m.length,d>=a)if(i){for(;a++<=d;)m.push(0);l=c=0,r=1,o%=P,s=o-P+1}else break e;else{for(l=a=m[d],r=1;a>=10;a/=10)r++;o%=P,s=o-P+r,c=s<0?0:l/v(10,r-s-1)%10|0}if(i=i||e<0||m[d+1]!==void 0||(s<0?l:l%v(10,r-s-1)),u=n<4?(c||i)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||i||n==6&&(o>0?s>0?l/v(10,r-s):0:m[d-1])%10&1||n==(t.s<0?8:7)),e<1||!m[0])return m.length=0,u?(e-=t.e+1,m[0]=v(10,(P-e%P)%P),t.e=-e||0):m[0]=t.e=0,t;if(o==0?(m.length=d,a=1,d--):(m.length=d+1,a=v(10,P-o),m[d]=s>0?(l/v(10,r-s)%v(10,s)|0)*a:0),u)for(;;)if(d==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(t.e++,m[0]==Y&&(m[0]=1));break}else{if(m[d]+=a,m[d]!=Y)break;m[d--]=0,a=1}for(o=m.length;m[--o]===0;)m.pop()}return h&&(t.e>f.maxE?(t.d=null,t.e=NaN):t.e<f.minE&&(t.e=0,t.d=[0])),t}function $(t,e,n){if(!t.isFinite())return Ut(t);var i,r=t.e,o=D(t.d),s=o.length;return e?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+oe(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):r<0?(o="0."+oe(-r-1)+o,n&&(i=n-s)>0&&(o+=oe(i))):r>=s?(o+=oe(r+1-s),n&&(i=n-r-1)>0&&(o=o+"."+oe(i))):((i=r+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(o+="."),o+=oe(i))),o}function qe(t,e){var n=t[0];for(e*=P;n>=10;n/=10)e++;return e}function _e(t,e,n){if(e>Mn)throw h=!0,n&&(t.precision=n),Error(vt);return b(new t(De),e,1,!0)}function Q(t,e,n){if(e>at)throw Error(vt);return b(new t(Ve),e,n,!0)}function _t(t){var e=t.length-1,n=e*P+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function oe(t){for(var e="";t--;)e+="0";return e}function Wt(t,e,n,i){var r,o=new t(1),s=Math.ceil(i/P+4);for(h=!1;;){if(n%2&&(o=o.times(e),Mt(o.d,s)&&(r=!0)),n=_(n/2),n===0){n=o.d.length-1,r&&o.d[n]===0&&++o.d[n];break}e=e.times(e),Mt(e.d,s)}return h=!0,o}function Rt(t){return t.d[t.d.length-1]&1}function qt(t,e,n){for(var i,r=new t(e[0]),o=0;++o<e.length;)if(i=new t(e[o]),i.s)r[n](i)&&(r=i);else{r=i;break}return r}function ut(t,e){var n,i,r,o,s,a,c,u=0,l=0,m=0,d=t.constructor,f=d.rounding,A=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(h=!1,c=A):c=e,a=new d(.03125);t.e>-2;)t=t.times(a),m+=5;for(i=Math.log(v(2,m))/Math.LN10*2+5|0,c+=i,n=o=s=new d(1),d.precision=c;;){if(o=b(o.times(t),c,1),n=n.times(++l),a=s.plus(C(o,n,c,1)),D(a.d).slice(0,c)===D(s.d).slice(0,c)){for(r=m;r--;)s=b(s.times(s),c,1);if(e==null)if(u<3&&ke(s.d,c-i,f,u))d.precision=c+=10,n=o=a=new d(1),l=0,u++;else return b(s,d.precision=A,f,h=!0);else return d.precision=A,s}s=a}}function se(t,e){var n,i,r,o,s,a,c,u,l,m,d,f=1,A=10,w=t,F=w.d,I=w.constructor,E=I.rounding,B=I.precision;if(w.s<0||!F||!F[0]||!w.e&&F[0]==1&&F.length==1)return new I(F&&!F[0]?-1/0:w.s!=1?NaN:F?0:w);if(e==null?(h=!1,l=B):l=e,I.precision=l+=A,n=D(F),i=n.charAt(0),Math.abs(o=w.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)w=w.times(t),n=D(w.d),i=n.charAt(0),f++;o=w.e,i>1?(w=new I("0."+n),o++):w=new I(i+"."+n.slice(1))}else return u=_e(I,l+2,B).times(o+""),w=se(new I(i+"."+n.slice(1)),l-A).plus(u),I.precision=B,e==null?b(w,B,E,h=!0):w;for(m=w,c=s=w=C(w.minus(1),w.plus(1),l,1),d=b(w.times(w),l,1),r=3;;){if(s=b(s.times(d),l,1),u=c.plus(C(s,new I(r),l,1)),D(u.d).slice(0,l)===D(c.d).slice(0,l))if(c=c.times(2),o!==0&&(c=c.plus(_e(I,l+2,B).times(o+""))),c=C(c,new I(f),l,1),e==null)if(ke(c.d,l-A,E,a))I.precision=l+=A,u=s=w=C(m.minus(1),m.plus(1),l,1),d=b(w.times(w),l,1),r=a=1;else return b(c,I.precision=B,E,h=!0);else return I.precision=B,c;c=u,r+=2}}function Ut(t){return String(t.s*t.s/0)}function ct(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(r=e.length;e.charCodeAt(r-1)===48;--r);if(e=e.slice(i,r),e){if(r-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%P,n<0&&(i+=P),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=P;i<r;)t.d.push(+e.slice(i,i+=P));e=e.slice(i),i=P-e.length}else i-=r;for(;i--;)e+="0";t.d.push(+e),h&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function On(t,e){var n,i,r,o,s,a,c,u,l;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Vt.test(e))return ct(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Nn.test(e))n=16,e=e.toLowerCase();else if(Kn.test(e))n=2;else if(Ln.test(e))n=8;else throw Error(ae+e);for(o=e.search(/p/i),o>0?(c=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),s=o>=0,i=t.constructor,s&&(e=e.replace(".",""),a=e.length,o=a-o,r=Wt(i,new i(n),o,o*2)),u=Ee(e,n,Y),l=u.length-1,o=l;u[o]===0;--o)u.pop();return o<0?new i(t.s*0):(t.e=qe(u,l),t.d=u,h=!1,s&&(t=C(t,r,a*4)),c&&(t=t.times(Math.abs(c)<54?v(2,c):Te.pow(2,c))),h=!0,t)}function vn(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:ge(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/Ue(5,n)),e=ge(t,2,e,e);for(var r,o=new t(5),s=new t(16),a=new t(20);n--;)r=e.times(e),e=e.times(o.plus(r.times(s.times(r).minus(a))));return e}function ge(t,e,n,i,r){var o,s,a,c,u=1,l=t.precision,m=Math.ceil(l/P);for(h=!1,c=n.times(n),a=new t(i);;){if(s=C(a.times(c),new t(e++*e++),l,1),a=r?i.plus(s):i.minus(s),i=C(s.times(c),new t(e++*e++),l,1),s=a.plus(i),s.d[m]!==void 0){for(o=m;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=i,i=s,s=o,u++}return h=!0,s.d.length=m+1,s}function Ue(t,e){for(var n=t;--e;)n*=t;return n}function Gt(t,e){var n,i=e.s<0,r=Q(t,t.precision,1),o=r.times(.5);if(e=e.abs(),e.lte(o))return ie=i?4:1,e;if(n=e.divToInt(r),n.isZero())ie=i?3:2;else{if(e=e.minus(n.times(r)),e.lte(o))return ie=Rt(n)?i?2:3:i?4:1,e;ie=Rt(n)?i?1:4:i?3:2}return e.minus(r).abs()}function lt(t,e,n,i){var r,o,s,a,c,u,l,m,d,f=t.constructor,A=n!==void 0;if(A?(G(n,1,ue),i===void 0?i=f.rounding:G(i,0,8)):(n=f.precision,i=f.rounding),!t.isFinite())l=Ut(t);else{for(l=$(t),s=l.indexOf("."),A?(r=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):r=e,s>=0&&(l=l.replace(".",""),d=new f(1),d.e=l.length-s,d.d=Ee($(d),10,r),d.e=d.d.length),m=Ee(l,10,r),o=c=m.length;m[--c]==0;)m.pop();if(!m[0])l=A?"0p+0":"0";else{if(s<0?o--:(t=new f(t),t.d=m,t.e=o,t=C(t,d,n,i,0,r),m=t.d,o=t.e,u=Ot),s=m[n],a=r/2,u=u||m[n+1]!==void 0,u=i<4?(s!==void 0||u)&&(i===0||i===(t.s<0?3:2)):s>a||s===a&&(i===4||u||i===6&&m[n-1]&1||i===(t.s<0?8:7)),m.length=n,u)for(;++m[--n]>r-1;)m[n]=0,n||(++o,m.unshift(1));for(c=m.length;!m[c-1];--c);for(s=0,l="";s<c;s++)l+=ot.charAt(m[s]);if(A){if(c>1)if(e==16||e==8){for(s=e==16?4:3,--c;c%s;c++)l+="0";for(m=Ee(l,r,e),c=m.length;!m[c-1];--c);for(s=1,l="1.";s<c;s++)l+=ot.charAt(m[s])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>c)for(o-=c;o--;)l+="0";else o<c&&(l=l.slice(0,o)+"."+l.slice(o))}l=(e==16?"0x":e==2?"0b":e==8?"0o":"")+l}return t.s<0?"-"+l:l}function Mt(t,e){if(t.length>e)return t.length=e,!0}function En(t){return new this(t).abs()}function Dn(t){return new this(t).acos()}function Vn(t){return new this(t).acosh()}function _n(t,e){return new this(t).plus(e)}function Wn(t){return new this(t).asin()}function qn(t){return new this(t).asinh()}function Un(t){return new this(t).atan()}function Gn(t){return new this(t).atanh()}function Xn(t,e){t=new this(t),e=new this(e);var n,i=this.precision,r=this.rounding,o=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Q(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Q(this,i,r):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Q(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(C(t,e,o,1)),e=Q(this,o,1),this.precision=i,this.rounding=r,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(C(t,e,o,1)),n}function Hn(t){return new this(t).cbrt()}function zn(t){return b(t=new this(t),t.e+1,2)}function Zn(t,e,n){return new this(t).clamp(e,n)}function jn(t){if(!t||typeof t!="object")throw Error(We+"Object expected");var e,n,i,r=t.defaults===!0,o=["precision",1,ue,"rounding",0,8,"toExpNeg",-be,0,"toExpPos",0,be,"maxE",0,be,"minE",-be,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],r&&(this[n]=st[n]),(i=t[n])!==void 0)if(_(i)===i&&i>=o[e+1]&&i<=o[e+2])this[n]=i;else throw Error(ae+n+": "+i);if(n="crypto",r&&(this[n]=st[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Et);else this[n]=!1;else throw Error(ae+n+": "+i);return this}function Qn(t){return new this(t).cos()}function Yn(t){return new this(t).cosh()}function Xt(t){var e,n,i;function r(o){var s,a,c,u=this;if(!(u instanceof r))return new r(o);if(u.constructor=r,Ft(o)){u.s=o.s,h?!o.d||o.e>r.maxE?(u.e=NaN,u.d=null):o.e<r.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;h?s>r.maxE?(u.e=NaN,u.d=null):s<r.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[o]):(u.e=s,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return ct(u,o.toString())}else if(c!=="string")throw Error(ae+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(a===43&&(o=o.slice(1)),u.s=1),Vt.test(o)?ct(u,o):On(u,o)}if(r.prototype=p,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=jn,r.clone=Xt,r.isDecimal=Ft,r.abs=En,r.acos=Dn,r.acosh=Vn,r.add=_n,r.asin=Wn,r.asinh=qn,r.atan=Un,r.atanh=Gn,r.atan2=Xn,r.cbrt=Hn,r.ceil=zn,r.clamp=Zn,r.cos=Qn,r.cosh=Yn,r.div=Jn,r.exp=$n,r.floor=ei,r.hypot=ti,r.ln=ni,r.log=ii,r.log10=oi,r.log2=ri,r.max=si,r.min=ai,r.mod=ui,r.mul=ci,r.pow=li,r.random=mi,r.round=di,r.sign=pi,r.sin=fi,r.sinh=bi,r.sqrt=gi,r.sub=yi,r.sum=wi,r.tan=Pi,r.tanh=Ai,r.trunc=hi,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function Jn(t,e){return new this(t).div(e)}function $n(t){return new this(t).exp()}function ei(t){return b(t=new this(t),t.e+1,3)}function ti(){var t,e,n=new this(0);for(h=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return h=!0,new this(1/0);n=e}return h=!0,n.sqrt()}function Ft(t){return t instanceof Te||t&&t.toStringTag===Dt||!1}function ni(t){return new this(t).ln()}function ii(t,e){return new this(t).log(e)}function ri(t){return new this(t).log(2)}function oi(t){return new this(t).log(10)}function si(){return qt(this,arguments,"lt")}function ai(){return qt(this,arguments,"gt")}function ui(t,e){return new this(t).mod(e)}function ci(t,e){return new this(t).mul(e)}function li(t,e){return new this(t).pow(e)}function mi(t){var e,n,i,r,o=0,s=new this(1),a=[];if(t===void 0?t=this.precision:G(t,1,ue),i=Math.ceil(t/P),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)r=e[o],r>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=r%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)r=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(r%1e7),o+=4);o=i/4}else throw Error(Et);else for(;o<i;)a[o++]=Math.random()*1e7|0;for(i=a[--o],t%=P,i&&t&&(r=v(10,P-t),a[o]=(i/r|0)*r);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=P)a.shift();for(i=1,r=a[0];r>=10;r/=10)i++;i<P&&(n-=P-i)}return s.e=n,s.d=a,s}function di(t){return b(t=new this(t),t.e+1,this.rounding)}function pi(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function fi(t){return new this(t).sin()}function bi(t){return new this(t).sinh()}function gi(t){return new this(t).sqrt()}function yi(t,e){return new this(t).sub(e)}function wi(){var t=0,e=arguments,n=new this(e[t]);for(h=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return h=!0,b(n,this.precision,this.rounding)}function Pi(t){return new this(t).tan()}function Ai(t){return new this(t).tanh()}function hi(t){return b(t=new this(t),t.e+1,1)}p[Symbol.for("nodejs.util.inspect.custom")]=p.toString;p[Symbol.toStringTag]="Decimal";var Te=p.constructor=Xt(st);De=new Te(De);Ve=new Te(Ve);var x=Te;import{PublicKey as Er}from"@solana/web3.js";import{get as Ht,set as ki}from"lodash";var mt=class{logLevel;name;constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let n=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},zt={},Ti={};function q(t){let e=Ht(zt,t);if(!e){let n=Ht(Ti,t);e=new mt({name:t,logLevel:n}),ki(zt,t,e)}return e}import{MINT_SIZE as Wr,TOKEN_PROGRAM_ID as qr,getTransferFeeConfig as Ur,unpackMint as Gr}from"@solana/spl-token";var Xr=q("Raydium_accountInfo_util");import te from"bn.js";import Li from"big.js";import co from"bn.js";import Bi from"toformat";var xi=Bi,Be=xi;import He from"big.js";import Si from"bn.js";import Ci from"decimal.js-light";import xe from"bn.js";var jt=9007199254740991;function ee(t){let e=q("Raydium_parseBigNumberish");if(t instanceof xe)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new xe(t);e.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&e.logWithError(`BigNumberish number underflow: ${t}`),(t>=jt||t<=-jt)&&e.logWithError(`BigNumberish number overflow: ${t}`),new xe(String(t))):typeof t=="bigint"?new xe(t.toString()):(e.error(`invalid BigNumberish value: ${t}`),new xe(0))}var Xe=q("module/fraction"),dt=Be(He),Ie=Be(Ci),Ki={[0]:Ie.ROUND_DOWN,[1]:Ie.ROUND_HALF_UP,[2]:Ie.ROUND_UP},Ni={[0]:He.roundDown,[1]:He.roundHalfUp,[2]:He.roundUp},N=class{numerator;denominator;constructor(e,n=new Si(1)){this.numerator=ee(e),this.denominator=ee(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new N(this.denominator,this.numerator)}add(e){let n=e instanceof N?e:new N(ee(e));return this.denominator.eq(n.denominator)?new N(this.numerator.add(n.numerator),this.denominator):new N(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(e){let n=e instanceof N?e:new N(ee(e));return this.denominator.eq(n.denominator)?new N(this.numerator.sub(n.numerator),this.denominator):new N(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(e){let n=e instanceof N?e:new N(ee(e));return new N(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(e){let n=e instanceof N?e:new N(ee(e));return new N(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(e,n={groupSeparator:""},i=1){Number.isInteger(e)||Xe.logWithError(`${e} is not an integer.`),e<=0&&Xe.logWithError(`${e} is not positive.`),Ie.set({precision:e+1,rounding:Ki[i]});let r=new Ie(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return r.toFormat(r.decimalPlaces(),n)}toFixed(e,n={groupSeparator:""},i=1){return Number.isInteger(e)||Xe.logWithError(`${e} is not an integer.`),e<0&&Xe.logWithError(`${e} is negative.`),dt.DP=e,dt.RM=Ni[i]||1,new dt(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,n)}isZero(){return this.numerator.isZero()}};var Po=q("Raydium_amount"),Ao=Be(Li);import{PublicKey as Mi}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Qt}from"@solana/spl-token";var pt={chainId:101,address:Mi.default.toBase58(),programId:Qt.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},ce={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Qt.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as bt}from"@solana/web3.js";import{PublicKey as L,SystemProgram as Yt,SYSVAR_RENT_PUBKEY as Fi}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Oi}from"@solana/spl-token";function ft({pubkey:t,isSigner:e=!1,isWritable:n=!0}){return{pubkey:t,isWritable:n,isSigner:e}}var Co=[ft({pubkey:Oi,isWritable:!1}),ft({pubkey:Yt.programId,isWritable:!1}),ft({pubkey:Fi,isWritable:!1})];function Jt({publicKey:t,transformSol:e}){let n=$t(t.toString());if(n instanceof L)return e&&n.equals(Se)?Ge:n;if(e&&n.toString()===Se.toBase58())return Ge;if(typeof n=="string"){if(n===L.default.toBase58())return L.default;try{return new L(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function $t(t){try{return new L(t)}catch{return t}}var vi=new L("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ei=new L("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Di=new L("SysvarRent111111111111111111111111111111111"),Ko=new L("SysvarC1ock11111111111111111111111111111111"),en=new L("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),No=new L("Sysvar1nstructions1111111111111111111111111"),Lo=Yt.programId,Ro=new L("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Mo=new L("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Fo=new L("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Oo=new L("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),vo=new L("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Eo=new L("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Do=new L("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Vo=new L("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),_o=new L("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Wo=new L("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),qo=new L("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Ge=new L("So11111111111111111111111111111111111111112"),Se=L.default;var gt=class{symbol;name;decimals;isToken2022;mint;constructor({mint:e,decimals:n,symbol:i,name:r,skipMint:o=!1,isToken2022:s=!1}){if(e===Se.toBase58()||e instanceof bt&&Se.equals(e)){this.decimals=ce.decimals,this.symbol=ce.symbol,this.name=ce.name,this.mint=new bt(ce.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=i||e.toString().substring(0,6),this.name=r||e.toString().substring(0,6),this.mint=o?bt.default:Jt({publicKey:e}),this.isToken2022=s}equals(e){return this===e?!0:this.mint.equals(e.mint)}},le=gt;fe(le,"WSOL",new gt({...ce,mint:ce.address}));var yt=class{symbol;name;decimals;constructor({decimals:e,symbol:n="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=n,this.name=i}equals(e){return this===e}},ze=yt;fe(ze,"SOL",new yt(pt));import Vi from"bn.js";var es=new N(new Vi(100));var ss=q("Raydium_price");import{PublicKey as Ts}from"@solana/web3.js";import xs from"bn.js";var _i=new te(0),Us=new te(1),Gs=new te(2),Xs=new te(3),Hs=new te(5),Ri=new te(10),zs=new te(100),Zs=new te(1e3),js=new te(1e4);function tn(t,e,n){return t.mul(e).add(n).sub(new te(1)).div(n)}import{PublicKey as Aa}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ka}from"@solana/spl-token";import{ComputeBudgetProgram as ia,Keypair as sa,PublicKey as aa,Transaction as ca,TransactionMessage as ma,VersionedTransaction as da}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ga}from"@solana/spl-token";var ya=q("Raydium_txUtil");import{PublicKey as k}from"@solana/web3.js";var Ia=new k("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Sa=new k("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Ca=new k("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Ka=new k("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Na=new k("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),La=new k("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Ra=new k("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Ma=new k("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Fa=new k("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Oa=new k("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),qi=new k("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Ui=new k("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Gi=new k("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),va=new k("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Ea=new k("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Da=new k("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Va=new k("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),_a=new k("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Wa=new k("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),qa=new k("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Ua=new k("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Ga=new k("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Xi=new k("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),Hi=new k("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),zi=new k("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2"),Xa=new k("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Zi=new k("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),Ha=new k("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),ji=new k("7AFUeLVRjBfzqK3tTGw8hN48KLQWSk6DTE8xprWdPqix"),za=new k("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Za=new k("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Qi=new k("LanD8FpTBBvzZFXjTxsAoipkFsxPUCDB4qAqKxYDiNP"),Yi=new k("HYNHiyKJ3gGVFvyxJAurK7qr7P2o5J9THmvCGMdULtpW");var ja={SERUM_MARKET:k.default,OPENBOOK_MARKET:new k("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),UTIL1216:k.default,FarmV3:new k("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),FarmV5:new k("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),FarmV6:new k("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),AmmV4:new k("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),AmmStable:new k("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),CLMM:new k("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),CLMM_LOCK_PROGRAM_ID:new k("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),CLMM_LOCK_AUTH_ID:new k("8qmHNvu2Kr2C7U8mJL4Vz1vTDxMhVuXKREwU7TNoaVEo"),Router:new k("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),CREATE_CPMM_POOL_PROGRAM:Xi,CREATE_CPMM_POOL_AUTH:Hi,CREATE_CPMM_POOL_FEE_ACC:zi,FEE_DESTINATION_ID:new k("3XMrhbv989VxAMi3DErLV9eJht1pHppW5LbKxe9fkEFR"),LOCK_CPMM_PROGRAM:Zi,LCOK_CPMM_AUTH:ji,LAUNCHPAD_PROGRAM:Qi,LAUNCHPAD_AUTH:Yi};import je from"bn.js";function Qe(t,e){if(t.isZero())return new je(0);let n=t.div(e);return n.isZero()?new je(1):t.mod(e).gt(new je(0))?n.add(new je(1)):n}import{PublicKey as Ji,AddressLookupTableAccount as nn}from"@solana/web3.js";var $i={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new nn({key:new Ji("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:nn.deserialize(Buffer.from("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","base64"))})};import{PublicKey as pu,sendAndConfirmTransaction as fu,SystemProgram as yu,Transaction as wu,TransactionMessage as Au,VersionedTransaction as hu}from"@solana/web3.js";import Tu from"axios";import tr from"bn.js";var de=new tr(1e6);var me=class{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){throw Error()}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){throw Error()}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){throw Error()}static buyExactIn({poolInfo:e,amount:n}){throw Error()}static buyExactOut({poolInfo:e,amount:n}){throw Error()}static sellExactIn({poolInfo:e,amount:n}){throw Error()}static sellExactOut({poolInfo:e,amount:n}){throw Error()}};import{PublicKey as jd}from"@solana/web3.js";import Yd from"bn.js";import{AccountLayout as tp,TOKEN_2022_PROGRAM_ID as np,TOKEN_PROGRAM_ID as ip}from"@solana/spl-token";import{PublicKey as $u}from"@solana/web3.js";import{MintLayout as tc,TOKEN_PROGRAM_ID as ic}from"@solana/spl-token";import{Keypair as wd,PublicKey as Pd,SystemProgram as hd,TransactionInstruction as kd}from"@solana/web3.js";import Bd from"bn.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as Sd,TOKEN_2022_PROGRAM_ID as Cd,TOKEN_PROGRAM_ID as Kd}from"@solana/spl-token";import{PublicKey as lr}from"@solana/web3.js";import un,{isBN as cn}from"bn.js";import{bits as bc,BitStructure as gc,blob as nr,Blob as yc,cstr as wc,f32 as Pc,f32be as Ac,f64 as hc,f64be as kc,greedy as Tc,Layout as ir,ns64 as Bc,ns64be as xc,nu64 as Ic,nu64be as Sc,offset as Cc,s16 as Kc,s16be as Nc,s24 as Lc,s24be as Rc,s32 as rr,s32be as Mc,s40 as Fc,s40be as Oc,s48 as vc,s48be as Ec,s8 as Dc,seq as or,struct as Vc,Structure as sr,u16 as ar,u16be as _c,u24 as Wc,u24be as qc,u32 as Uc,u32be as Gc,u40 as Xc,u40be as Hc,u48 as zc,u48be as Zc,u8 as ur,UInt as cr,union as jc,Union as Qc,unionLayoutDiscriminator as Yc,utf8 as Jc}from"@solana/buffer-layout";var ht=ir,on=sr;var kt=cr;var sn=ur,Ce=ar;var re=rr;var an=or;var H=nr;var ye=class extends ht{blob;signed;constructor(e,n,i){super(e,i),this.blob=H(e),this.signed=n}decode(e,n=0){let i=new un(this.blob.decode(e,n),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(e,n,i=0){return typeof e=="number"&&(e=new un(e)),this.signed&&(e=e.toTwos(this.span*8)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),n,i)}};function U(t){return new kt(1,t)}function we(t){return new kt(4,t)}function T(t){return new ye(8,!1,t)}function R(t){return new ye(16,!1,t)}function ln(t){return new ye(8,!0,t)}function mn(t){return new ye(16,!0,t)}var Ye=class extends ht{layout;decoder;encoder;constructor(e,n,i,r){super(e.span,r),this.layout=e,this.decoder=n,this.encoder=i}decode(e,n){return this.decoder(this.layout.decode(e,n))}encode(e,n,i){return this.layout.encode(this.encoder(e),n,i)}getSpan(e,n){return this.layout.getSpan(e,n)}};function S(t){return new Ye(H(32),e=>new lr(e),e=>e.toBuffer(),t)}function Bt(t){return new Ye(sn(),mr,dr,t)}function mr(t){if(t===0)return!1;if(t===1)return!0;throw new Error("Invalid bool: "+t)}function dr(t){return t?1:0}var Tt=class extends on{decode(e,n){return super.decode(e,n)}};function W(t,e,n){return new Tt(t,e,n)}function M(t,e,n){let i,r=typeof e=="number"?e:cn(e)?e.toNumber():new Proxy(e,{get(o,s){if(!i){let a=Reflect.get(o,"count");i=cn(a)?a.toNumber():a,Reflect.set(o,"count",i)}return Reflect.get(o,s)},set(o,s,a){return s==="count"&&(i=a),Reflect.set(o,s,a)}});return an(t,r,n)}import Qm from"bn.js";import Z from"bn.js";var xt=new Z(0),dn=new Z(1),pn=new Z(-1),J=new Z(1).shln(64),fn=new Z(1).shln(128),It=J.sub(dn);var pr=fn.subn(1),Pe=-443636,Ke=-Pe,St=new Z("4295048016"),Ct=new Z("79226673521066979257578248091"),dl=new Z("4295048017"),pl=new Z("79226673521066979257578248090");var fr=new Z(10).pow(new Z(6));var fl=new Z("18446744073700000000");import vm from"bn.js";var hl=Buffer.from("amm_config","utf8"),kl=Buffer.from("pool","utf8"),Tl=Buffer.from("pool_vault","utf8"),Bl=Buffer.from("pool_reward_vault","utf8"),xl=Buffer.from("position","utf8"),Il=Buffer.from("tick_array","utf8"),Sl=Buffer.from("operation","utf8"),Cl=Buffer.from("pool_tick_array_bitmap_extension","utf8"),Kl=Buffer.from("observation","utf8");var Nl=Buffer.from("locked_position","utf8");var Ll=Buffer.from("support_mint","utf8");import{PublicKey as lm}from"@solana/web3.js";import{TOKEN_2022_PROGRAM_ID as dm}from"@solana/spl-token";import fm from"bn.js";import Fl from"bn.js";var Lt=14;var Je=60;var Pr=W([H(8),U("bump"),Ce("index"),S(""),we("protocolFeeRate"),we("tradeFeeRate"),Ce("tickSpacing"),M(T(),8,"")]),Ar=W([we("blockTimestamp"),ln("tickCumulative"),M(T(),4)]),Bn=W([H(8),Bt("initialized"),T("recentEpoch"),Ce("observationIndex"),S("poolId"),M(Ar,100,"observations"),M(T(),4)]),hr=W([U("rewardState"),T("openTime"),T("endTime"),T("lastUpdateTime"),R("emissionsPerSecondX64"),T("rewardTotalEmissioned"),T("rewardClaimed"),S("tokenMint"),S("tokenVault"),S("creator"),R("rewardGrowthGlobalX64")]),hn=W([H(8),U("bump"),S("ammConfig"),S("creator"),S("mintA"),S("mintB"),S("vaultA"),S("vaultB"),S("observationId"),U("mintDecimalsA"),U("mintDecimalsB"),Ce("tickSpacing"),R("liquidity"),R("sqrtPriceX64"),re("tickCurrent"),we(),R("feeGrowthGlobalX64A"),R("feeGrowthGlobalX64B"),T("protocolFeesTokenA"),T("protocolFeesTokenB"),R("swapInAmountTokenA"),R("swapOutAmountTokenB"),R("swapInAmountTokenB"),R("swapOutAmountTokenA"),U("status"),M(U(),7,""),M(hr,3,"rewardInfos"),M(T(),16,"tickArrayBitmap"),T("totalFeesTokenA"),T("totalFeesClaimedTokenA"),T("totalFeesTokenB"),T("totalFeesClaimedTokenB"),T("fundFeesTokenA"),T("fundFeesTokenB"),T("startTime"),M(T(),15*4-3,"padding")]),kr=W([R("growthInsideLastX64"),T("rewardAmountOwed")]),kn=W([H(8),U("bump"),S("nftMint"),S("poolId"),re("tickLower"),re("tickUpper"),R("liquidity"),R("feeGrowthInsideLastX64A"),R("feeGrowthInsideLastX64B"),T("tokenFeesOwedA"),T("tokenFeesOwedB"),M(kr,3,"rewardInfos"),M(T(),8,"")]),sd=W([H(8),U("bump"),S("poolId"),re("tickLowerIndex"),re("tickUpperIndex"),R("liquidity"),R("feeGrowthInsideLastX64A"),R("feeGrowthInsideLastX64B"),T("tokenFeesOwedA"),T("tokenFeesOwedB"),M(R(),3,"rewardGrowthInside"),M(T(),8,"")]),Tr=W([re("tick"),mn("liquidityNet"),R("liquidityGross"),R("feeGrowthOutsideX64A"),R("feeGrowthOutsideX64B"),M(R(),3,"rewardGrowthsOutsideX64"),M(we(),13,"")]),wn=W([H(8),S("poolId"),re("startTickIndex"),M(Tr,Je,"ticks"),U("initializedTickCount"),M(U(),115,"")]),Br=W([H(329),M(S(),100,"whitelistMints")]),wr=W([H(8),S("poolId"),M(M(T(),8),Lt,"positiveTickArrayBitmap"),M(M(T(),8),Lt,"negativeTickArrayBitmap")]),ad=W([T(),U("bump"),S("owner"),S("poolId"),S("positionId"),S("nftAccount"),M(T(),8)]),ud=W([H(8),U("bump"),S("lockOwner"),S("poolId"),S("positionId"),S("nftAccount"),S("lockNftMint"),T("recentEpoch"),M(T(),8)]);Bn.span;var Dd=q("Raydium_Clmm");var $e=class extends me{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new x(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new x(n.toString()).div(e.toString()).mul(10**(i-r))}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new x(e.virtualB.add(e.realB).toString()).div(e.virtualA.sub(e.realA).toString()).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new x(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new x(e.virtualB.add(e.realB.add(o)).toString()).div(e.virtualA.sub(e.realA.add(r)).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){if(e.lte(i))throw Error("supply need gt total sell");let s=e.sub(i).sub(r);if(s.lte(new Re(0)))throw Error("supplyMinusSellLocked <= 0");let a=n.sub(o);if(a.lte(new Re(0)))throw Error("tfMinusMf <= 0");let c=a.mul(i).mul(i).div(s),u=a.mul(i).div(s).sub(n);if(u.lt(new Re(0)))throw Error("supply/totalSell/totalLockedAmount diff too high");let l=c.div(u),m=n.mul(n).div(u);if(l.lt(new Re(0))||m.lt(new Re(0)))throw Error("invalid input 0");return{a:l,b:m,c:i}}static buyExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,inputReserve:e.virtualB.add(e.realB),outputReserve:e.virtualA.sub(e.realA)})}static buyExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,inputReserve:e.virtualB.add(e.realB),outputReserve:e.virtualA.sub(e.realA)})}static sellExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,inputReserve:e.virtualA.sub(e.realA),outputReserve:e.virtualB.add(e.realB)})}static sellExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,inputReserve:e.virtualA.sub(e.realA),outputReserve:e.virtualB.add(e.realB)})}static getAmountOut({amountIn:e,inputReserve:n,outputReserve:i}){let r=e.mul(i),o=n.add(e);return r.div(o)}static getAmountIn({amountOut:e,inputReserve:n,outputReserve:i}){let r=n.mul(e),o=i.sub(e);return Qe(r,o)}};import xn from"bn.js";var et=class extends me{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new x(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new x(n.toString()).div(e.toString()).mul(10**(i-r))}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new x(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new x(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new x(e.virtualB.add(e.realB).add(o).toString()).div(e.virtualA.sub(e.realA).add(r).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){let s=e.sub(r);if(s.lte(new xn(0)))throw Error("invalid input 1");let a=new xn(2).mul(n).sub(o),u=n.mul(s).div(a);return{a:u,b:n,c:u}}static buyExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,initInput:e.virtualB,initOutput:e.virtualA})}static buyExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,initInput:e.virtualB,initOutput:e.virtualA})}static sellExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,initInput:e.virtualA,initOutput:e.virtualB})}static sellExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,initInput:e.virtualA,initOutput:e.virtualB})}static getAmountOut({amountIn:e,initInput:n,initOutput:i}){return i.mul(e).div(n)}static getAmountIn({amountOut:e,initInput:n,initOutput:i}){let r=n.mul(e);return Qe(r,i)}};import X from"bn.js";import In from"bn.js";var Me=class{static _multipler(e){return new x(10).pow(e)}static getPrice({priceX64:e,decimalA:n,decimalB:i}){return new x(e.toString()).div(this._Q64).mul(this._multipler(n)).div(this._multipler(i))}static getPriceX64({price:e,decimalA:n,decimalB:i}){let r=e.mul(this._multipler(i)).div(this._multipler(n));return new In(r.mul(this._Q64).toFixed(0))}};fe(Me,"_Q64",new x(new In(1).shln(64).toString()));var tt=class extends me{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new x(0)}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new x(0)}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new x(e.virtualA.mul(e.realA).toString()).div(Me._Q64).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new x(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new x(e.virtualB.add(e.realB).add(o).toString()).div(e.virtualA.sub(e.realA).add(r).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){let s=e.sub(r);if(s.lte(new X(0)))throw Error("supplyMinusLocked need gt 0");let a=n.mul(new X(3)).sub(o),u=n.mul(new X(2)).mul(s).div(a),l=u.mul(u),m=n.mul(new X(2)).mul(J).div(l);if(!m.gt(new X(0)))throw Error("a need gt 0");if(!It.gt(m))throw Error("a need lt u64 max");return{a:m,b:new X(0),c:u}}static buyExactIn({poolInfo:e,amount:n}){let i=e.realB.add(n),r=new X(2).mul(i).mul(J).div(e.virtualA);return new X(new x(r.toString()).sqrt().toFixed(0)).sub(e.realA)}static buyExactOut({poolInfo:e,amount:n}){let i=e.realA.add(n),r=i.mul(i),{div:o,mod:s}=e.virtualA.mul(r).divmod(new X(2).mul(J));return(s.isZero()?o:o.add(new X(1))).sub(e.realB)}static sellExactIn({poolInfo:e,amount:n}){let i=e.realA.sub(n),r=i.mul(i),{div:o,mod:s}=e.virtualA.mul(r).divmod(new X(2).mul(J)),a=s.isZero()?o:o.add(new X(1));return e.realB.sub(a)}static sellExactOut({poolInfo:e,amount:n}){let i=e.realB.sub(n),r=new X(2).mul(i).mul(J).div(e.virtualA),o=new X(new x(r.toString()).sqrt().toFixed(0));return e.realA.sub(o)}};var nt=class{static getPoolCurvePointByPoolInfo({curveType:e,pointCount:n,poolInfo:i}){return this.getPoolCurvePointByInit({curveType:e,pointCount:n,supply:i.supply,totalFundRaising:i.totalFundRaisingB,totalSell:i.totalSellA,totalLockedAmount:i.vestingSchedule.totalLockedAmount,migrateFee:i.migrateFee,decimalA:i.mintDecimalsA,decimalB:i.mintDecimalsB})}static getPoolCurvePointByInit({curveType:e,pointCount:n,supply:i,totalFundRaising:r,totalSell:o,totalLockedAmount:s,migrateFee:a,decimalA:c,decimalB:u}){if(n<3)throw Error("point count < 3");let l=this.getCurve(e),m=l.getInitParam({supply:i,totalFundRaising:r,totalSell:o,totalLockedAmount:s,migrateFee:a}),d=l.getPoolInitPriceByInit({...m,decimalA:c,decimalB:u}),f=r.div(new ne(n-1)),A=new ne(0),w=[{price:d,totalSellSupply:0}],{a:F,b:I}=m,E=A,B=A;for(let O=1;O<n;O++){let pe=O!==n-1?f:r.sub(B),z=this.buyExactIn({poolInfo:{virtualA:F,virtualB:I,realA:E,realB:B,totalFundRaisingB:r,totalSellA:o},amountB:pe,protocolFeeRate:A,platformFeeRate:A,curveType:e,shareFeeRate:A});E=E.add(z.amountA),B=B.add(z.amountB);let Ae=this.getPrice({poolInfo:{virtualA:F,virtualB:I,realA:E,realB:B},decimalA:c,decimalB:u,curveType:e});w.push({price:Ae,totalSellSupply:new x(E.toString()).div(10**c).toNumber()})}return w}static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i,curveType:r}){return this.getCurve(r).getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i})}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r,curveType:o}){return this.getCurve(o).getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r})}static getPrice({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolPrice({poolInfo:e,decimalA:i,decimalB:r})}static getEndPrice({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolPrice({poolInfo:e,decimalA:i,decimalB:r})}static getPoolEndPriceReal({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolEndPriceReal({poolInfo:e,decimalA:i,decimalB:r})}static checkParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,decimals:o,config:s,migrateType:a}){if(Number(o)!==6)throw Error("decimals = 6");if(e.mul(s.maxLockRate).div(de).lt(r))throw Error("total lock amount gte max lock amount");if(e.lt(s.minSupplyA.mul(new ne(10**o))))throw Error("supply lt min supply");let u=e.mul(s.minSellRateA).div(de);if(i.lt(u))throw Error("invalid input");if(n.lt(s.minFundRaisingB))throw Error("total fund raising lt min fund raising");let l=e.sub(i).sub(r),m=e.mul(s.minMigrateRateA).div(de);if(l.lt(m))throw Error("migrate lt min migrate amount");let d=e.sub(i).sub(r),f=new ne(new x(d.mul(n).toString()).sqrt().toFixed(0));if(a==="amm"){let A=new ne(10).pow(new ne(o));if(f.lte(A))throw Error("check migrate lp error")}else if(a==="cpmm"){let A=new ne(100);if(f.lte(A))throw Error("check migrate lp error")}else throw Error("migrate type error")}static buyExactIn({poolInfo:e,amountB:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s}){let a=i.add(s).add(r),c=this.calculateFee({amount:n,feeRate:a}),u=n.sub(c),l=this.getCurve(o),m=l.buyExactIn({poolInfo:e,amount:u}),d=e.totalSellA.sub(e.realA),f,A,w;if(m.gt(d)){f=d;let I=l.buyExactOut({poolInfo:e,amount:f});A=this.calculatePreFee({postFeeAmount:I,feeRate:a}),w=A.sub(I)}else f=m,A=n,w=c;let F=this.splitFee({totalFee:w,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s});return{amountA:f,amountB:A,splitFee:F}}static buyExactOut({poolInfo:e,amountA:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s}){let a=e.totalSellA.sub(e.realA),c=n;n.gt(a)&&(c=a);let l=this.getCurve(o).buyExactOut({poolInfo:e,amount:n}),m=i.add(s).add(r),d=this.calculatePreFee({postFeeAmount:l,feeRate:m}),f=d.sub(l),A=this.splitFee({totalFee:f,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s});return{amountA:c,amountB:d,splitFee:A}}static sellExactIn({poolInfo:e,amountA:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s}){let c=this.getCurve(o).sellExactIn({poolInfo:e,amount:n}),u=this.calculateFee({amount:c,feeRate:i.add(s).add(r)}),l=this.splitFee({totalFee:u,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s});return{amountA:n,amountB:c.sub(u),splitFee:l}}static sellExactOut({poolInfo:e,amountB:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s}){let a=i.add(s).add(r),c=this.calculatePreFee({postFeeAmount:n,feeRate:a});if(e.realB.lt(c))throw Error("Insufficient liquidity");let u=c.sub(n),m=nt.getCurve(o).sellExactOut({poolInfo:e,amount:c});if(m.gt(e.realA))throw Error();let d=this.splitFee({totalFee:u,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s});return{amountA:m,amountB:n,splitFee:d}}static splitFee({totalFee:e,protocolFeeRate:n,platformFeeRate:i,shareFeeRate:r}){let o=n.add(i).add(r),s=o.isZero()?new ne(0):e.mul(i).div(o),a=o.isZero()?new ne(0):e.mul(r).div(o),c=e.sub(s).sub(a);return{platformFee:s,shareFee:a,protocolFee:c}}static calculateFee({amount:e,feeRate:n}){return tn(e,n,de)}static calculatePreFee({postFeeAmount:e,feeRate:n}){if(n.isZero())return e;let i=e.mul(de),r=de.sub(n);return i.add(r).sub(new ne(1)).div(r)}static getCurve(e){switch(e){case 0:return $e;case 1:return et;case 2:return tt}throw Error("find curve error")}};export{nt as Curve};
//# sourceMappingURL=curve.mjs.map