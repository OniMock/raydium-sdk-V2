var en=Object.defineProperty;var tn=(e,t,n)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Be=(e,t,n)=>(tn(e,typeof t!="symbol"?t+"":t,n),n);import{PublicKey as Ae}from"@solana/web3.js";import Pe from"bn.js";var ce=9e15,oe=1e9,He="0123456789abcdef",Ce="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Me="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",je={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ce,maxE:ce,crypto:!1},wt,z,w=!0,Re="[DecimalError] ",ie=Re+"Invalid argument: ",Tt=Re+"Precision limit exceeded",xt=Re+"crypto unavailable",Pt="[object Decimal]",F=Math.floor,E=Math.pow,nn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,on=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,At=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,H=1e7,b=7,sn=9007199254740991,an=Ce.length-1,Qe=Me.length-1,f={toStringTag:Pt};f.absoluteValue=f.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),h(e)};f.ceil=function(){return h(new this.constructor(this),this.e+1,2)};f.clampedTo=f.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(ie+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};f.comparedTo=f.cmp=function(e){var t,n,r,i,o=this,s=o.d,u=(e=new o.constructor(e)).d,c=o.s,a=e.s;if(!s||!u)return!c||!a?NaN:c!==a?c:s===u?0:!s^c<0?1:-1;if(!s[0]||!u[0])return s[0]?c:u[0]?-a:0;if(c!==a)return c;if(o.e!==e.e)return o.e>e.e^c<0?1:-1;for(r=s.length,i=u.length,t=0,n=r<i?r:i;t<n;++t)if(s[t]!==u[t])return s[t]>u[t]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1};f.cosine=f.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+b,r.rounding=1,n=un(r,Bt(r,n)),r.precision=e,r.rounding=t,h(z==2||z==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};f.cubeRoot=f.cbrt=function(){var e,t,n,r,i,o,s,u,c,a,l=this,m=l.constructor;if(!l.isFinite()||l.isZero())return new m(l);for(w=!1,o=l.s*E(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=_(l.d),e=l.e,(o=(e-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=E(n,1/3),e=F((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?n="5e"+e:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new m(n),r.s=l.s):r=new m(o.toString()),s=(e=m.precision)+3;;)if(u=r,c=u.times(u).times(u),a=c.plus(l),r=L(a.plus(l).times(u),a.plus(c),s+2,1),_(u.d).slice(0,s)===(n=_(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!i&&n=="4999"){if(!i&&(h(u,e+1,0),u.times(u).times(u).eq(l))){r=u;break}s+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(h(r,e+1,1),t=!r.times(r).times(r).eq(l));break}return w=!0,h(r,e,m.rounding,t)};f.decimalPlaces=f.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-F(this.e/b))*b,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};f.dividedBy=f.div=function(e){return L(this,new this.constructor(e))};f.dividedToIntegerBy=f.divToInt=function(e){var t=this,n=t.constructor;return h(L(t,new n(e),0,1,1),n.precision,n.rounding)};f.equals=f.eq=function(e){return this.cmp(e)===0};f.floor=function(){return h(new this.constructor(this),this.e+1,3)};f.greaterThan=f.gt=function(e){return this.cmp(e)>0};f.greaterThanOrEqualTo=f.gte=function(e){var t=this.cmp(e);return t==1||t===0};f.hyperbolicCosine=f.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,u=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return u;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,i=o.d.length,i<32?(e=Math.ceil(i/3),t=(1/_e(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=le(s,1,o.times(t),new s(1),!0);for(var c,a=e,l=new s(8);a--;)c=o.times(o),o=u.minus(c.times(l.minus(c.times(l))));return h(o,s.precision=n,s.rounding=r,!0)};f.hyperbolicSine=f.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,r=i.d.length,r<3)i=le(o,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/_e(5,e)),i=le(o,2,i,i,!0);for(var s,u=new o(5),c=new o(16),a=new o(20);e--;)s=i.times(i),i=i.times(u.plus(s.times(c.times(s).plus(a))))}return o.precision=t,o.rounding=n,h(i,t,n,!0)};f.hyperbolicTangent=f.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,L(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};f.inverseCosine=f.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return r!==-1?r===0?t.isNeg()?G(n,i,o):new n(0):new n(NaN):t.isZero()?G(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=G(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))};f.inverseHyperbolicCosine=f.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,w=!1,n=n.times(n).minus(1).sqrt().plus(n),w=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};f.inverseHyperbolicSine=f.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,w=!1,n=n.times(n).plus(1).sqrt().plus(n),w=!0,r.precision=e,r.rounding=t,n.ln())};f.inverseHyperbolicTangent=f.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?h(new o(i),e,t,!0):(o.precision=n=r-i.e,i=L(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)};f.inverseSine=f.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,t!==-1?t===0?(e=G(o,n+4,r).times(.5),e.s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))};f.inverseTangent=f.atan=function(){var e,t,n,r,i,o,s,u,c,a=this,l=a.constructor,m=l.precision,p=l.rounding;if(a.isFinite()){if(a.isZero())return new l(a);if(a.abs().eq(1)&&m+4<=Qe)return s=G(l,m+4,p).times(.25),s.s=a.s,s}else{if(!a.s)return new l(NaN);if(m+4<=Qe)return s=G(l,m+4,p).times(.5),s.s=a.s,s}for(l.precision=u=m+10,l.rounding=1,n=Math.min(28,u/b+2|0),e=n;e;--e)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(w=!1,t=Math.ceil(u/b),r=1,c=a.times(a),s=new l(a),i=a;e!==-1;)if(i=i.times(c),o=s.minus(i.div(r+=2)),i=i.times(c),s=o.plus(i.div(r+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),w=!0,h(s,l.precision=m,l.rounding=p,!0)};f.isFinite=function(){return!!this.d};f.isInteger=f.isInt=function(){return!!this.d&&F(this.e/b)>this.d.length-2};f.isNaN=function(){return!this.s};f.isNegative=f.isNeg=function(){return this.s<0};f.isPositive=f.isPos=function(){return this.s>0};f.isZero=function(){return!!this.d&&this.d[0]===0};f.lessThan=f.lt=function(e){return this.cmp(e)<0};f.lessThanOrEqualTo=f.lte=function(e){return this.cmp(e)<1};f.logarithm=f.log=function(e){var t,n,r,i,o,s,u,c,a=this,l=a.constructor,m=l.precision,p=l.rounding,g=5;if(e==null)e=new l(10),t=!0;else{if(e=new l(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=a.d,a.s<0||!n||!n[0]||a.eq(1))return new l(n&&!n[0]?-1/0:a.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10===0;)i/=10;o=i!==1}if(w=!1,u=m+g,s=re(a,u),r=t?Ee(l,u+10):re(e,u),c=L(s,r,u,1),de(c.d,i=m,p))do if(u+=10,s=re(a,u),r=t?Ee(l,u+10):re(e,u),c=L(s,r,u,1),!o){+_(c.d).slice(i+1,i+15)+1==1e14&&(c=h(c,m+1,0));break}while(de(c.d,i+=10,p));return w=!0,h(c,m,p)};f.minus=f.sub=function(e){var t,n,r,i,o,s,u,c,a,l,m,p,g=this,A=g.constructor;if(e=new A(e),!g.d||!e.d)return!g.s||!e.s?e=new A(NaN):g.d?e.s=-e.s:e=new A(e.d||g.s!==e.s?g:NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(a=g.d,p=e.d,u=A.precision,c=A.rounding,!a[0]||!p[0]){if(p[0])e.s=-e.s;else if(a[0])e=new A(g);else return new A(c===3?-0:0);return w?h(e,u,c):e}if(n=F(e.e/b),l=F(g.e/b),a=a.slice(),o=l-n,o){for(m=o<0,m?(t=a,o=-o,s=p.length):(t=p,n=l,s=a.length),r=Math.max(Math.ceil(u/b),s)+2,o>r&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for(r=a.length,s=p.length,m=r<s,m&&(s=r),r=0;r<s;r++)if(a[r]!=p[r]){m=a[r]<p[r];break}o=0}for(m&&(t=a,a=p,p=t,e.s=-e.s),s=a.length,r=p.length-s;r>0;--r)a[s++]=0;for(r=p.length;r>o;){if(a[--r]<p[r]){for(i=r;i&&a[--i]===0;)a[i]=H-1;--a[i],a[r]+=H}a[r]-=p[r]}for(;a[--s]===0;)a.pop();for(;a[0]===0;a.shift())--n;return a[0]?(e.d=a,e.e=ve(a,n),w?h(e,u,c):e):new A(c===3?-0:0)};f.modulo=f.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?h(new r(n),r.precision,r.rounding):(w=!1,r.modulo==9?(t=L(n,e.abs(),0,3,1),t.s*=e.s):t=L(n,e,0,r.modulo,1),t=t.times(e),w=!0,n.minus(t))};f.naturalExponential=f.exp=function(){return Ze(this)};f.naturalLogarithm=f.ln=function(){return re(this)};f.negated=f.neg=function(){var e=new this.constructor(this);return e.s=-e.s,h(e)};f.plus=f.add=function(e){var t,n,r,i,o,s,u,c,a,l,m=this,p=m.constructor;if(e=new p(e),!m.d||!e.d)return!m.s||!e.s?e=new p(NaN):m.d||(e=new p(e.d||m.s===e.s?m:NaN)),e;if(m.s!=e.s)return e.s=-e.s,m.minus(e);if(a=m.d,l=e.d,u=p.precision,c=p.rounding,!a[0]||!l[0])return l[0]||(e=new p(m)),w?h(e,u,c):e;if(o=F(m.e/b),r=F(e.e/b),a=a.slice(),i=o-r,i){for(i<0?(n=a,i=-i,s=l.length):(n=l,r=o,s=a.length),o=Math.ceil(u/b),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=a.length,i=l.length,s-i<0&&(i=s,n=l,l=a,a=n),t=0;i;)t=(a[--i]=a[i]+l[i]+t)/H|0,a[i]%=H;for(t&&(a.unshift(t),++r),s=a.length;a[--s]==0;)a.pop();return e.d=a,e.e=ve(a,r),w?h(e,u,c):e};f.precision=f.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ie+e);return n.d?(t=kt(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};f.round=function(){var e=this,t=e.constructor;return h(new t(e),e.e+1,t.rounding)};f.sine=f.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+b,r.rounding=1,n=ln(r,Bt(r,n)),r.precision=e,r.rounding=t,h(z>2?n.neg():n,e,t,!0)):new r(NaN)};f.squareRoot=f.sqrt=function(){var e,t,n,r,i,o,s=this,u=s.d,c=s.e,a=s.s,l=s.constructor;if(a!==1||!u||!u[0])return new l(!a||a<0&&(!u||u[0])?NaN:u?s:1/0);for(w=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=_(u),(t.length+c)%2==0&&(t+="0"),a=Math.sqrt(t),c=F((c+1)/2)-(c<0||c%2),a==1/0?t="5e"+c:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),r=new l(t)):r=new l(a.toString()),n=(c=l.precision)+3;;)if(o=r,r=o.plus(L(s,o,n+2,1)).times(.5),_(o.d).slice(0,n)===(t=_(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(h(o,c+1,0),o.times(o).eq(s))){r=o;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(h(r,c+1,1),e=!r.times(r).eq(s));break}return w=!0,h(r,c,l.rounding,e)};f.tangent=f.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=L(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,h(z==2||z==4?n.neg():n,e,t,!0)):new r(NaN)};f.times=f.mul=function(e){var t,n,r,i,o,s,u,c,a,l=this,m=l.constructor,p=l.d,g=(e=new m(e)).d;if(e.s*=l.s,!p||!p[0]||!g||!g[0])return new m(!e.s||p&&!p[0]&&!g||g&&!g[0]&&!p?NaN:!p||!g?e.s/0:e.s*0);for(n=F(l.e/b)+F(e.e/b),c=p.length,a=g.length,c<a&&(o=p,p=g,g=o,s=c,c=a,a=s),o=[],s=c+a,r=s;r--;)o.push(0);for(r=a;--r>=0;){for(t=0,i=c+r;i>r;)u=o[i]+g[r]*p[i-r-1]+t,o[i--]=u%H|0,t=u/H|0;o[i]=(o[i]+t)%H|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=ve(o,n),w?h(e,m.precision,m.rounding):e};f.toBinary=function(e,t){return Xe(this,2,e,t)};f.toDecimalPlaces=f.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(W(e,0,oe),t===void 0?t=r.rounding:W(t,0,8),h(n,e+n.e+1,t))};f.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Q(r,!0):(W(e,0,oe),t===void 0?t=i.rounding:W(t,0,8),r=h(new i(r),e+1,t),n=Q(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};f.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?n=Q(i):(W(e,0,oe),t===void 0?t=o.rounding:W(t,0,8),r=h(new o(i),e+i.e+1,t),n=Q(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};f.toFraction=function(e){var t,n,r,i,o,s,u,c,a,l,m,p,g=this,A=g.d,y=g.constructor;if(!A)return new y(g);if(a=n=new y(1),r=c=new y(0),t=new y(r),o=t.e=kt(A)-g.e-1,s=o%b,t.d[0]=E(10,s<0?b+s:s),e==null)e=o>0?t:a;else{if(u=new y(e),!u.isInt()||u.lt(a))throw Error(ie+u);e=u.gt(t)?o>0?t:a:u}for(w=!1,u=new y(_(A)),l=y.precision,y.precision=o=A.length*b*2;m=L(u,t,0,1,1),i=n.plus(m.times(r)),i.cmp(e)!=1;)n=r,r=i,i=a,a=c.plus(m.times(i)),c=i,i=t,t=u.minus(m.times(i)),u=i;return i=L(e.minus(n),r,0,1,1),c=c.plus(i.times(a)),n=n.plus(i.times(r)),c.s=a.s=g.s,p=L(a,r,o,1).minus(g).abs().cmp(L(c,n,o,1).minus(g).abs())<1?[a,r]:[c,n],y.precision=l,w=!0,p};f.toHexadecimal=f.toHex=function(e,t){return Xe(this,16,e,t)};f.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:W(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(w=!1,n=L(n,e,0,t,1).times(e),w=!0,h(n)):(e.s=n.s,n=e),n};f.toNumber=function(){return+this};f.toOctal=function(e,t){return Xe(this,8,e,t)};f.toPower=f.pow=function(e){var t,n,r,i,o,s,u=this,c=u.constructor,a=+(e=new c(e));if(!u.d||!e.d||!u.d[0]||!e.d[0])return new c(E(+u,a));if(u=new c(u),u.eq(1))return u;if(r=c.precision,o=c.rounding,e.eq(1))return h(u,r,o);if(t=F(e.e/b),t>=e.d.length-1&&(n=a<0?-a:a)<=sn)return i=St(c,u,n,r),e.s<0?new c(1).div(i):h(i,r,o);if(s=u.s,s<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(s=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=s,u}return n=E(+u,a),t=n==0||!isFinite(n)?F(a*(Math.log("0."+_(u.d))/Math.LN10+u.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?s/0:0):(w=!1,c.rounding=u.s=1,n=Math.min(12,(t+"").length),i=Ze(e.times(re(u,r+n)),r),i.d&&(i=h(i,r+5,1),de(i.d,r,o)&&(t=r+10,i=h(Ze(e.times(re(u,t+n)),t),t+5,1),+_(i.d).slice(r+1,r+15)+1==1e14&&(i=h(i,r+1,0)))),i.s=s,w=!0,c.rounding=o,h(i,r,o))};f.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Q(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(W(e,1,oe),t===void 0?t=i.rounding:W(t,0,8),r=h(new i(r),e,t),n=Q(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};f.toSignificantDigits=f.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(W(e,1,oe),t===void 0?t=r.rounding:W(t,0,8)),h(new r(n),e,t)};f.toString=function(){var e=this,t=e.constructor,n=Q(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};f.truncated=f.trunc=function(){return h(new this.constructor(this),this.e+1,1)};f.valueOf=f.toJSON=function(){var e=this,t=e.constructor,n=Q(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function _(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",n=b-r.length,n&&(o+=ne(n)),o+=r;s=e[t],r=s+"",n=b-r.length,n&&(o+=ne(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function W(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ie+e)}function de(e,t,n,r){var i,o,s,u;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=b,i=0):(i=Math.ceil((t+1)/b),t%=b),o=E(10,b-t),u=e[i]%o|0,r==null?t<3?(t==0?u=u/100|0:t==1&&(u=u/10|0),s=n<4&&u==99999||n>3&&u==49999||u==5e4||u==0):s=(n<4&&u+1==o||n>3&&u+1==o/2)&&(e[i+1]/o/100|0)==E(10,t-2)-1||(u==o/2||u==0)&&(e[i+1]/o/100|0)==0:t<4?(t==0?u=u/1e3|0:t==1?u=u/100|0:t==2&&(u=u/10|0),s=(r||n<4)&&u==9999||!r&&n>3&&u==4999):s=((r||n<4)&&u+1==o||!r&&n>3&&u+1==o/2)&&(e[i+1]/o/1e3|0)==E(10,t-3)-1,s}function Ne(e,t,n){for(var r,i=[0],o,s=0,u=e.length;s<u;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=He.indexOf(e.charAt(s++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function un(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/_e(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=le(e,1,t.times(i),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}var L=function(){function e(r,i,o){var s,u=0,c=r.length;for(r=r.slice();c--;)s=r[c]*i+u,r[c]=s%o|0,u=s/o|0;return u&&r.unshift(u),r}function t(r,i,o,s){var u,c;if(o!=s)c=o>s?1:-1;else for(u=c=0;u<o;u++)if(r[u]!=i[u]){c=r[u]>i[u]?1:-1;break}return c}function n(r,i,o,s){for(var u=0;o--;)r[o]-=u,u=r[o]<i[o]?1:0,r[o]=u*s+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s,u,c){var a,l,m,p,g,A,y,M,I,V,S,O,ke,Z,qe,Se,fe,Ue,U,Ie,Le=r.constructor,Ge=r.s==i.s?1:-1,K=r.d,B=i.d;if(!K||!K[0]||!B||!B[0])return new Le(!r.s||!i.s||(K?B&&K[0]==B[0]:!B)?NaN:K&&K[0]==0||!B?Ge*0:Ge/0);for(c?(g=1,l=r.e-i.e):(c=H,g=b,l=F(r.e/g)-F(i.e/g)),U=B.length,fe=K.length,I=new Le(Ge),V=I.d=[],m=0;B[m]==(K[m]||0);m++);if(B[m]>(K[m]||0)&&l--,o==null?(Z=o=Le.precision,s=Le.rounding):u?Z=o+(r.e-i.e)+1:Z=o,Z<0)V.push(1),A=!0;else{if(Z=Z/g+2|0,m=0,U==1){for(p=0,B=B[0],Z++;(m<fe||p)&&Z--;m++)qe=p*c+(K[m]||0),V[m]=qe/B|0,p=qe%B|0;A=p||m<fe}else{for(p=c/(B[0]+1)|0,p>1&&(B=e(B,p,c),K=e(K,p,c),U=B.length,fe=K.length),Se=U,S=K.slice(0,U),O=S.length;O<U;)S[O++]=0;Ie=B.slice(),Ie.unshift(0),Ue=B[0],B[1]>=c/2&&++Ue;do p=0,a=t(B,S,U,O),a<0?(ke=S[0],U!=O&&(ke=ke*c+(S[1]||0)),p=ke/Ue|0,p>1?(p>=c&&(p=c-1),y=e(B,p,c),M=y.length,O=S.length,a=t(y,S,M,O),a==1&&(p--,n(y,U<M?Ie:B,M,c))):(p==0&&(a=p=1),y=B.slice()),M=y.length,M<O&&y.unshift(0),n(S,y,O,c),a==-1&&(O=S.length,a=t(B,S,U,O),a<1&&(p++,n(S,U<O?Ie:B,O,c))),O=S.length):a===0&&(p++,S=[0]),V[m++]=p,a&&S[0]?S[O++]=K[Se]||0:(S=[K[Se]],O=1);while((Se++<fe||S[0]!==void 0)&&Z--);A=S[0]!==void 0}V[0]||V.shift()}if(g==1)I.e=l,wt=A;else{for(m=1,p=V[0];p>=10;p/=10)m++;I.e=m+l*g-1,h(I,u?o+I.e+1:o,s,A)}return I}}();function h(e,t,n,r){var i,o,s,u,c,a,l,m,p,g=e.constructor;e:if(t!=null){if(m=e.d,!m)return e;for(i=1,u=m[0];u>=10;u/=10)i++;if(o=t-i,o<0)o+=b,s=t,l=m[p=0],c=l/E(10,i-s-1)%10|0;else if(p=Math.ceil((o+1)/b),u=m.length,p>=u)if(r){for(;u++<=p;)m.push(0);l=c=0,i=1,o%=b,s=o-b+1}else break e;else{for(l=u=m[p],i=1;u>=10;u/=10)i++;o%=b,s=o-b+i,c=s<0?0:l/E(10,i-s-1)%10|0}if(r=r||t<0||m[p+1]!==void 0||(s<0?l:l%E(10,i-s-1)),a=n<4?(c||r)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||r||n==6&&(o>0?s>0?l/E(10,i-s):0:m[p-1])%10&1||n==(e.s<0?8:7)),t<1||!m[0])return m.length=0,a?(t-=e.e+1,m[0]=E(10,(b-t%b)%b),e.e=-t||0):m[0]=e.e=0,e;if(o==0?(m.length=p,u=1,p--):(m.length=p+1,u=E(10,b-o),m[p]=s>0?(l/E(10,i-s)%E(10,s)|0)*u:0),a)for(;;)if(p==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=u,u=1;s>=10;s/=10)u++;o!=u&&(e.e++,m[0]==H&&(m[0]=1));break}else{if(m[p]+=u,m[p]!=H)break;m[p--]=0,u=1}for(o=m.length;m[--o]===0;)m.pop()}return w&&(e.e>g.maxE?(e.d=null,e.e=NaN):e.e<g.minE&&(e.e=0,e.d=[0])),e}function Q(e,t,n){if(!e.isFinite())return Lt(e);var r,i=e.e,o=_(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+ne(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+ne(-i-1)+o,n&&(r=n-s)>0&&(o+=ne(r))):i>=s?(o+=ne(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+ne(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=ne(r))),o}function ve(e,t){var n=e[0];for(t*=b;n>=10;n/=10)t++;return t}function Ee(e,t,n){if(t>an)throw w=!0,n&&(e.precision=n),Error(Tt);return h(new e(Ce),t,1,!0)}function G(e,t,n){if(t>Qe)throw Error(Tt);return h(new e(Me),t,n,!0)}function kt(e){var t=e.length-1,n=t*b+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function ne(e){for(var t="";e--;)t+="0";return t}function St(e,t,n,r){var i,o=new e(1),s=Math.ceil(r/b+4);for(w=!1;;){if(n%2&&(o=o.times(t),bt(o.d,s)&&(i=!0)),n=F(n/2),n===0){n=o.d.length-1,i&&o.d[n]===0&&++o.d[n];break}t=t.times(t),bt(t.d,s)}return w=!0,o}function ht(e){return e.d[e.d.length-1]&1}function It(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;)if(r=new e(t[o]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function Ze(e,t){var n,r,i,o,s,u,c,a=0,l=0,m=0,p=e.constructor,g=p.rounding,A=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(w=!1,c=A):c=t,u=new p(.03125);e.e>-2;)e=e.times(u),m+=5;for(r=Math.log(E(2,m))/Math.LN10*2+5|0,c+=r,n=o=s=new p(1),p.precision=c;;){if(o=h(o.times(e),c,1),n=n.times(++l),u=s.plus(L(o,n,c,1)),_(u.d).slice(0,c)===_(s.d).slice(0,c)){for(i=m;i--;)s=h(s.times(s),c,1);if(t==null)if(a<3&&de(s.d,c-r,g,a))p.precision=c+=10,n=o=u=new p(1),l=0,a++;else return h(s,p.precision=A,g,w=!0);else return p.precision=A,s}s=u}}function re(e,t){var n,r,i,o,s,u,c,a,l,m,p,g=1,A=10,y=e,M=y.d,I=y.constructor,V=I.rounding,S=I.precision;if(y.s<0||!M||!M[0]||!y.e&&M[0]==1&&M.length==1)return new I(M&&!M[0]?-1/0:y.s!=1?NaN:M?0:y);if(t==null?(w=!1,l=S):l=t,I.precision=l+=A,n=_(M),r=n.charAt(0),Math.abs(o=y.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(e),n=_(y.d),r=n.charAt(0),g++;o=y.e,r>1?(y=new I("0."+n),o++):y=new I(r+"."+n.slice(1))}else return a=Ee(I,l+2,S).times(o+""),y=re(new I(r+"."+n.slice(1)),l-A).plus(a),I.precision=S,t==null?h(y,S,V,w=!0):y;for(m=y,c=s=y=L(y.minus(1),y.plus(1),l,1),p=h(y.times(y),l,1),i=3;;){if(s=h(s.times(p),l,1),a=c.plus(L(s,new I(i),l,1)),_(a.d).slice(0,l)===_(c.d).slice(0,l))if(c=c.times(2),o!==0&&(c=c.plus(Ee(I,l+2,S).times(o+""))),c=L(c,new I(g),l,1),t==null)if(de(c.d,l-A,V,u))I.precision=l+=A,a=s=y=L(m.minus(1),m.plus(1),l,1),p=h(y.times(y),l,1),i=u=1;else return h(c,I.precision=S,V,w=!0);else return I.precision=S,c;c=a,i+=2}}function Lt(e){return String(e.s*e.s/0)}function ze(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%b,n<0&&(r+=b),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=b;r<i;)e.d.push(+t.slice(r,r+=b));t=t.slice(r),r=b-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),w&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function cn(e,t){var n,r,i,o,s,u,c,a,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),At.test(t))return ze(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(rn.test(t))n=16,t=t.toLowerCase();else if(nn.test(t))n=2;else if(on.test(t))n=8;else throw Error(ie+t);for(o=t.search(/p/i),o>0?(c=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,r=e.constructor,s&&(t=t.replace(".",""),u=t.length,o=u-o,i=St(r,new r(n),o,o*2)),a=Ne(t,n,H),l=a.length-1,o=l;a[o]===0;--o)a.pop();return o<0?new r(e.s*0):(e.e=ve(a,l),e.d=a,w=!1,s&&(e=L(e,i,u*4)),c&&(e=e.times(Math.abs(c)<54?E(2,c):ge.pow(2,c))),w=!0,e)}function ln(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:le(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/_e(5,n)),t=le(e,2,t,t);for(var i,o=new e(5),s=new e(16),u=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(s.times(i).minus(u))));return t}function le(e,t,n,r,i){var o,s,u,c,a=1,l=e.precision,m=Math.ceil(l/b);for(w=!1,c=n.times(n),u=new e(r);;){if(s=L(u.times(c),new e(t++*t++),l,1),u=i?r.plus(s):r.minus(s),r=L(s.times(c),new e(t++*t++),l,1),s=u.plus(r),s.d[m]!==void 0){for(o=m;s.d[o]===u.d[o]&&o--;);if(o==-1)break}o=u,u=r,r=s,s=o,a++}return w=!0,s.d.length=m+1,s}function _e(e,t){for(var n=e;--t;)n*=e;return n}function Bt(e,t){var n,r=t.s<0,i=G(e,e.precision,1),o=i.times(.5);if(t=t.abs(),t.lte(o))return z=r?4:1,t;if(n=t.divToInt(i),n.isZero())z=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(o))return z=ht(n)?r?2:3:r?4:1,t;z=ht(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Xe(e,t,n,r){var i,o,s,u,c,a,l,m,p,g=e.constructor,A=n!==void 0;if(A?(W(n,1,oe),r===void 0?r=g.rounding:W(r,0,8)):(n=g.precision,r=g.rounding),!e.isFinite())l=Lt(e);else{for(l=Q(e),s=l.indexOf("."),A?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,s>=0&&(l=l.replace(".",""),p=new g(1),p.e=l.length-s,p.d=Ne(Q(p),10,i),p.e=p.d.length),m=Ne(l,10,i),o=c=m.length;m[--c]==0;)m.pop();if(!m[0])l=A?"0p+0":"0";else{if(s<0?o--:(e=new g(e),e.d=m,e.e=o,e=L(e,p,n,r,0,i),m=e.d,o=e.e,a=wt),s=m[n],u=i/2,a=a||m[n+1]!==void 0,a=r<4?(s!==void 0||a)&&(r===0||r===(e.s<0?3:2)):s>u||s===u&&(r===4||a||r===6&&m[n-1]&1||r===(e.s<0?8:7)),m.length=n,a)for(;++m[--n]>i-1;)m[n]=0,n||(++o,m.unshift(1));for(c=m.length;!m[c-1];--c);for(s=0,l="";s<c;s++)l+=He.charAt(m[s]);if(A){if(c>1)if(t==16||t==8){for(s=t==16?4:3,--c;c%s;c++)l+="0";for(m=Ne(l,i,t),c=m.length;!m[c-1];--c);for(s=1,l="1.";s<c;s++)l+=He.charAt(m[s])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>c)for(o-=c;o--;)l+="0";else o<c&&(l=l.slice(0,o)+"."+l.slice(o))}l=(t==16?"0x":t==2?"0b":t==8?"0o":"")+l}return e.s<0?"-"+l:l}function bt(e,t){if(e.length>t)return e.length=t,!0}function mn(e){return new this(e).abs()}function pn(e){return new this(e).acos()}function fn(e){return new this(e).acosh()}function dn(e,t){return new this(e).plus(t)}function gn(e){return new this(e).asin()}function hn(e){return new this(e).asinh()}function bn(e){return new this(e).atan()}function yn(e){return new this(e).atanh()}function wn(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=G(this,o,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?G(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=G(this,o,1).times(.5),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(L(e,t,o,1)),t=G(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(L(e,t,o,1)),n}function Tn(e){return new this(e).cbrt()}function xn(e){return h(e=new this(e),e.e+1,2)}function Pn(e,t,n){return new this(e).clamp(t,n)}function An(e){if(!e||typeof e!="object")throw Error(Re+"Object expected");var t,n,r,i=e.defaults===!0,o=["precision",1,oe,"rounding",0,8,"toExpNeg",-ce,0,"toExpPos",0,ce,"maxE",0,ce,"minE",-ce,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=je[n]),(r=e[n])!==void 0)if(F(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(ie+n+": "+r);if(n="crypto",i&&(this[n]=je[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(xt);else this[n]=!1;else throw Error(ie+n+": "+r);return this}function kn(e){return new this(e).cos()}function Sn(e){return new this(e).cosh()}function Nt(e){var t,n,r;function i(o){var s,u,c,a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,yt(o)){a.s=o.s,w?!o.d||o.e>i.maxE?(a.e=NaN,a.d=null):o.e<i.minE?(a.e=0,a.d=[0]):(a.e=o.e,a.d=o.d.slice()):(a.e=o.e,a.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){a.s=1/o<0?-1:1,a.e=0,a.d=[0];return}if(o<0?(o=-o,a.s=-1):a.s=1,o===~~o&&o<1e7){for(s=0,u=o;u>=10;u/=10)s++;w?s>i.maxE?(a.e=NaN,a.d=null):s<i.minE?(a.e=0,a.d=[0]):(a.e=s,a.d=[o]):(a.e=s,a.d=[o]);return}else if(o*0!==0){o||(a.s=NaN),a.e=NaN,a.d=null;return}return ze(a,o.toString())}else if(c!=="string")throw Error(ie+o);return(u=o.charCodeAt(0))===45?(o=o.slice(1),a.s=-1):(u===43&&(o=o.slice(1)),a.s=1),At.test(o)?ze(a,o):cn(a,o)}if(i.prototype=f,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=An,i.clone=Nt,i.isDecimal=yt,i.abs=mn,i.acos=pn,i.acosh=fn,i.add=dn,i.asin=gn,i.asinh=hn,i.atan=bn,i.atanh=yn,i.atan2=wn,i.cbrt=Tn,i.ceil=xn,i.clamp=Pn,i.cos=kn,i.cosh=Sn,i.div=In,i.exp=Ln,i.floor=Bn,i.hypot=Nn,i.ln=Cn,i.log=Mn,i.log10=Rn,i.log2=En,i.max=vn,i.min=_n,i.mod=Dn,i.mul=On,i.pow=Kn,i.random=Fn,i.round=Vn,i.sign=Wn,i.sin=qn,i.sinh=Un,i.sqrt=Gn,i.sub=Hn,i.sum=jn,i.tan=Qn,i.tanh=Zn,i.trunc=zn,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function In(e,t){return new this(e).div(t)}function Ln(e){return new this(e).exp()}function Bn(e){return h(e=new this(e),e.e+1,3)}function Nn(){var e,t,n=new this(0);for(w=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return w=!0,new this(1/0);n=t}return w=!0,n.sqrt()}function yt(e){return e instanceof ge||e&&e.toStringTag===Pt||!1}function Cn(e){return new this(e).ln()}function Mn(e,t){return new this(e).log(t)}function En(e){return new this(e).log(2)}function Rn(e){return new this(e).log(10)}function vn(){return It(this,arguments,"lt")}function _n(){return It(this,arguments,"gt")}function Dn(e,t){return new this(e).mod(t)}function On(e,t){return new this(e).mul(t)}function Kn(e,t){return new this(e).pow(t)}function Fn(e){var t,n,r,i,o=0,s=new this(1),u=[];if(e===void 0?e=this.precision:W(e,1,oe),r=Math.ceil(e/b),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)i=t[o],i>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:u[o++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);o<r;)i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,o):(u.push(i%1e7),o+=4);o=r/4}else throw Error(xt);else for(;o<r;)u[o++]=Math.random()*1e7|0;for(r=u[--o],e%=b,r&&e&&(i=E(10,b-e),u[o]=(r/i|0)*i);u[o]===0;o--)u.pop();if(o<0)n=0,u=[0];else{for(n=-1;u[0]===0;n-=b)u.shift();for(r=1,i=u[0];i>=10;i/=10)r++;r<b&&(n-=b-r)}return s.e=n,s.d=u,s}function Vn(e){return h(e=new this(e),e.e+1,this.rounding)}function Wn(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function qn(e){return new this(e).sin()}function Un(e){return new this(e).sinh()}function Gn(e){return new this(e).sqrt()}function Hn(e,t){return new this(e).sub(t)}function jn(){var e=0,t=arguments,n=new this(t[e]);for(w=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return w=!0,h(n,this.precision,this.rounding)}function Qn(e){return new this(e).tan()}function Zn(e){return new this(e).tanh()}function zn(e){return h(e=new this(e),e.e+1,1)}f[Symbol.for("nodejs.util.inspect.custom")]=f.toString;f[Symbol.toStringTag]="Decimal";var ge=f.constructor=Nt(je);Ce=new ge(Ce);Me=new ge(Me);var me=ge;import{TOKEN_PROGRAM_ID as Hr}from"@solana/spl-token";import{ComputeBudgetProgram as ti,Keypair as ii,PublicKey as Et,Transaction as Je,TransactionMessage as ai,VersionedTransaction as ui}from"@solana/web3.js";import{get as Ct,set as Xn}from"lodash";var Ye=class{logLevel;name;constructor(t){this.logLevel=t.logLevel!==void 0?t.logLevel:0,this.name=t.name}set level(t){this.logLevel=t}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(t){return t<=this.logLevel}error(...t){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...t),this):this}logWithError(...t){let n=t.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(n)}warning(...t){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...t),this):this}info(...t){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...t),this):this}debug(...t){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...t),this):this}},Mt={},Yn={};function v(e){let t=Ct(Mt,e);if(!t){let n=Ct(Yn,e);t=new Ye({name:e,logLevel:n}),Xn(Mt,e,t)}return t}import{TOKEN_PROGRAM_ID as pi}from"@solana/spl-token";var X=v("Raydium_txUtil"),Jn=1644;function $n(e,t){e.length<1&&X.logWithError(`no instructions provided: ${e.toString()}`),t.length<1&&X.logWithError(`no signers provided:, ${t.toString()}`);let n=new Je;n.recentBlockhash="11111111111111111111111111111111",n.feePayer=t[0],n.add(...e);try{return Buffer.from(n.serialize({verifySignatures:!1})).toString("base64").length<Jn}catch{return!1}}async function Rt(e,t,n,r=!0){let i=new Et("RaydiumSimuLateTransaction11111111111111111"),o=[],s=new Je;s.feePayer=i;for(let a of t)$n([...s.instructions,a],[i])||(o.push(s),s=new Je,s.feePayer=i),s.add(a);s.instructions.length>0&&o.push(s);let u=[];try{if(u=await er(e,o,r),u.find(a=>a.err!==null))throw Error("rpc simulateTransaction error")}catch(a){a instanceof Error&&X.logWithError("failed to simulate for instructions","RPC_ERROR",{message:a.message})}let c=[];for(let a of u)if(X.debug("simulate result:",a),a.logs){let l=a.logs.filter(m=>m&&m.includes(n));X.debug("filteredLog:",c),l.length||X.logWithError("simulate log not match keyword","keyword",n),c.push(...l)}return c}function vt(e,t){let n=e.match(/{["\w:,]+}/g);return!n||n.length!==1?X.logWithError(`simulate log fail to match json, keyword: ${t}`):n[0]}function Y(e,t){let r=new RegExp(`"${t}":(\\d+)`,"g").exec(e);return!r||r.length!==2?X.logWithError(`simulate log fail to match key", key: ${t}`):r[1]}function pe(e,t){let[n,r]=Et.findProgramAddressSync(e,t);return{publicKey:n,nonce:r}}async function er(e,t,n){let r=[];if(n){let i=await e.getLatestBlockhash(),o=[];for(let a of t){a.recentBlockhash=i.blockhash,a.lastValidBlockHeight=i.lastValidBlockHeight;let m=a._compile().serialize(),g=a._serialize(m).toString("base64");o.push(g)}let s=o.map(a=>{let l=e._buildArgs([a],void 0,"base64");return{methodName:"simulateTransaction",args:l}}),u=[],c=20;for(let a=0;a<Math.ceil(s.length/c);a++)u.push(s.slice(a*c,(a+1)*c));r=await(await Promise.all(u.map(async a=>(await e._rpcBatchRequest(a)).map(l=>l.result.value)))).flat()}else try{r=await Promise.all(t.map(async i=>await(await e.simulateTransaction(i)).value))}catch(i){i instanceof Error&&X.logWithError("failed to get info for multiple accounts","RPC_ERROR",{message:i.message})}return r}import{PublicKey as Au}from"@solana/web3.js";import{MintLayout as Su,TOKEN_PROGRAM_ID as Lu}from"@solana/spl-token";import Sr from"big.js";import tu from"bn.js";import $ from"bn.js";import{PublicKey as tr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as _t}from"@solana/spl-token";var et={chainId:101,address:tr.default.toBase58(),programId:_t.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},J={chainId:101,address:"So11111111111111111111111111111111111111112",programId:_t.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as it}from"@solana/web3.js";import{PublicKey as C,SystemProgram as Dt,SYSVAR_RENT_PUBKEY as nr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as rr}from"@solana/spl-token";function q({pubkey:e,isSigner:t=!1,isWritable:n=!0}){return{pubkey:e,isWritable:n,isSigner:t}}var Ti=[q({pubkey:rr,isWritable:!1}),q({pubkey:Dt.programId,isWritable:!1}),q({pubkey:nr,isWritable:!1})];function nt({publicKey:e,transformSol:t}){let n=Ot(e.toString());if(n instanceof C)return t&&n.equals(he)?tt:n;if(t&&n.toString()===he.toBase58())return tt;if(typeof n=="string"){if(n===C.default.toBase58())return C.default;try{return new C(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Ot(e){try{return new C(e)}catch{return e}}var xi=new C("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Pi=new C("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),ir=new C("SysvarRent111111111111111111111111111111111"),Ai=new C("SysvarC1ock11111111111111111111111111111111"),ki=new C("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Si=new C("Sysvar1nstructions1111111111111111111111111"),Ii=Dt.programId,Li=new C("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Bi=new C("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Ni=new C("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ci=new C("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Mi=new C("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Ei=new C("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ri=new C("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),vi=new C("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),_i=new C("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Di=new C("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Oi=new C("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),tt=new C("So11111111111111111111111111111111111111112"),he=C.default;function rt(e){return nt({publicKey:e,transformSol:!0})}var ot=class{symbol;name;decimals;isToken2022;mint;constructor({mint:t,decimals:n,symbol:r,name:i,skipMint:o=!1,isToken2022:s=!1}){if(t===he.toBase58()||t instanceof it&&he.equals(t)){this.decimals=J.decimals,this.symbol=J.symbol,this.name=J.name,this.mint=new it(J.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=r||t.toString().substring(0,6),this.name=i||t.toString().substring(0,6),this.mint=o?it.default:nt({publicKey:t}),this.isToken2022=s}equals(t){return this===t?!0:this.mint.equals(t.mint)}},se=ot;Be(se,"WSOL",new ot({...J,mint:J.address}));var st=class{symbol;name;decimals;constructor({decimals:t,symbol:n="UNKNOWN",name:r="UNKNOWN"}){this.decimals=t,this.symbol=n,this.name=r}equals(t){return this===t}},De=st;Be(De,"SOL",new st(et));import Ke from"big.js";import ur from"bn.js";import cr from"decimal.js-light";import be from"bn.js";var Kt=9007199254740991;function j(e){let t=v("Raydium_parseBigNumberish");if(e instanceof be)return e;if(typeof e=="string"){if(e.match(/^-?[0-9]+$/))return new be(e);t.logWithError(`invalid BigNumberish string: ${e}`)}return typeof e=="number"?(e%1&&t.logWithError(`BigNumberish number underflow: ${e}`),(e>=Kt||e<=-Kt)&&t.logWithError(`BigNumberish number overflow: ${e}`),new be(String(e))):typeof e=="bigint"?new be(e.toString()):(t.error(`invalid BigNumberish value: ${e}`),new be(0))}import or from"toformat";var sr=or,ye=sr;var Oe=v("module/fraction"),at=ye(Ke),we=ye(cr),lr={[0]:we.ROUND_DOWN,[1]:we.ROUND_HALF_UP,[2]:we.ROUND_UP},mr={[0]:Ke.roundDown,[1]:Ke.roundHalfUp,[2]:Ke.roundUp},N=class{numerator;denominator;constructor(t,n=new ur(1)){this.numerator=j(t),this.denominator=j(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new N(this.denominator,this.numerator)}add(t){let n=t instanceof N?t:new N(j(t));return this.denominator.eq(n.denominator)?new N(this.numerator.add(n.numerator),this.denominator):new N(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(t){let n=t instanceof N?t:new N(j(t));return this.denominator.eq(n.denominator)?new N(this.numerator.sub(n.numerator),this.denominator):new N(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(t){let n=t instanceof N?t:new N(j(t));return new N(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(t){let n=t instanceof N?t:new N(j(t));return new N(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(t,n={groupSeparator:""},r=1){Number.isInteger(t)||Oe.logWithError(`${t} is not an integer.`),t<=0&&Oe.logWithError(`${t} is not positive.`),we.set({precision:t+1,rounding:lr[r]});let i=new we(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return i.toFormat(i.decimalPlaces(),n)}toFixed(t,n={groupSeparator:""},r=1){return Number.isInteger(t)||Oe.logWithError(`${t} is not an integer.`),t<0&&Oe.logWithError(`${t} is negative.`),at.DP=t,at.RM=mr[r]||1,new at(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,n)}isZero(){return this.numerator.isZero()}};import pr from"bn.js";var uo=new N(new pr(100));var go=v("Raydium_price");import{PublicKey as ko}from"@solana/web3.js";import Io from"bn.js";var Wt=new $(0),fr=new $(1),Uo=new $(2),Go=new $(3),Ho=new $(5),dr=new $(10),jo=new $(100),Qo=new $(1e3),Zo=new $(1e4);import{PublicKey as ts}from"@solana/web3.js";import{MINT_SIZE as os,TOKEN_PROGRAM_ID as ss,getTransferFeeConfig as as,unpackMint as us}from"@solana/spl-token";var cs=v("Raydium_accountInfo_util");import{PublicKey as hs}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ys}from"@solana/spl-token";import{PublicKey as T}from"@solana/web3.js";var Ps=new T("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),As=new T("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),ks=new T("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Ss=new T("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Is=new T("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Ls=new T("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Bs=new T("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Ns=new T("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Cs=new T("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Ms=new T("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Es=new T("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Rs=new T("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),vs=new T("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),_s=new T("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Ds=new T("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Os=new T("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Ks=new T("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Fs=new T("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Vs=new T("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Ws=new T("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),qs=new T("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Us=new T("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),gr=new T("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),hr=new T("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),br=new T("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2"),Gs=new T("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),yr=new T("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),Hs=new T("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),wr=new T("7AFUeLVRjBfzqK3tTGw8hN48KLQWSk6DTE8xprWdPqix"),js=new T("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Qs=new T("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Tr=new T("LanD8FpTBBvzZFXjTxsAoipkFsxPUCDB4qAqKxYDiNP"),xr=new T("HYNHiyKJ3gGVFvyxJAurK7qr7P2o5J9THmvCGMdULtpW");var Zs={SERUM_MARKET:T.default,OPENBOOK_MARKET:new T("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),UTIL1216:T.default,FarmV3:new T("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),FarmV5:new T("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),FarmV6:new T("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),AmmV4:new T("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),AmmStable:new T("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),CLMM:new T("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),CLMM_LOCK_PROGRAM_ID:new T("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),CLMM_LOCK_AUTH_ID:new T("8qmHNvu2Kr2C7U8mJL4Vz1vTDxMhVuXKREwU7TNoaVEo"),Router:new T("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),CREATE_CPMM_POOL_PROGRAM:gr,CREATE_CPMM_POOL_AUTH:hr,CREATE_CPMM_POOL_FEE_ACC:br,FEE_DESTINATION_ID:new T("3XMrhbv989VxAMi3DErLV9eJht1pHppW5LbKxe9fkEFR"),LOCK_CPMM_PROGRAM:yr,LCOK_CPMM_AUTH:wr,LAUNCHPAD_PROGRAM:Tr,LAUNCHPAD_AUTH:xr};import Ys from"bn.js";import{PublicKey as Pr,AddressLookupTableAccount as qt}from"@solana/web3.js";var Ar={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new qt({key:new Pr("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:qt.deserialize(Buffer.from("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","base64"))})};import{PublicKey as ga,sendAndConfirmTransaction as ha,SystemProgram as wa,Transaction as Ta,TransactionMessage as Pa,VersionedTransaction as Aa}from"@solana/web3.js";import Sa from"axios";import kr from"bn.js";var Ea=new kr(1e6);var lu=v("Raydium_amount"),mu=ye(Sr);var Fe=({address:e,programId:t,decimals:n,...r})=>({chainId:101,address:rt(e).toBase58(),programId:t,logoURI:"",symbol:"",name:"",decimals:n,tags:[],extensions:r.extensions||{},...r});import{PublicKey as te,SystemProgram as jc,SYSVAR_RENT_PUBKEY as Qc,TransactionInstruction as qr}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as zc,TOKEN_PROGRAM_ID as Xc}from"@solana/spl-token";import{PublicKey as Mr}from"@solana/web3.js";import Ht,{isBN as jt}from"bn.js";import{bits as vu,BitStructure as _u,blob as Ir,Blob as Du,cstr as Ou,f32 as Ku,f32be as Fu,f64 as Vu,f64be as Wu,greedy as qu,Layout as Lr,ns64 as Uu,ns64be as Gu,nu64 as Hu,nu64be as ju,offset as Qu,s16 as Zu,s16be as zu,s24 as Xu,s24be as Yu,s32 as Ju,s32be as $u,s40 as ec,s40be as tc,s48 as nc,s48be as rc,s8 as ic,seq as Br,struct as oc,Structure as Nr,u16 as sc,u16be as ac,u24 as uc,u24be as cc,u32 as lc,u32be as mc,u40 as pc,u40be as fc,u48 as dc,u48be as gc,u8 as hc,UInt as Cr,union as bc,Union as yc,unionLayoutDiscriminator as wc,utf8 as Tc}from"@solana/buffer-layout";var ct=Lr,Ut=Nr;var lt=Cr;var Gt=Br;var mt=Ir;var Ve=class extends ct{blob;signed;constructor(t,n,r){super(t,r),this.blob=mt(t),this.signed=n}decode(t,n=0){let r=new Ht(this.blob.decode(t,n),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(t,n,r=0){return typeof t=="number"&&(t=new Ht(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),n,r)}};function D(e){return new lt(1,e)}function ae(e){return new lt(4,e)}function d(e){return new Ve(8,!1,e)}function ee(e){return new Ve(16,!1,e)}var pt=class extends ct{layout;decoder;encoder;constructor(t,n,r,i){super(t.span,i),this.layout=t,this.decoder=n,this.encoder=r}decode(t,n){return this.decoder(this.layout.decode(t,n))}encode(t,n,r){return this.layout.encode(this.encoder(t),n,r)}getSpan(t,n){return this.layout.getSpan(t,n)}};function k(e){return new pt(mt(32),t=>new Mr(t),t=>t.toBuffer(),e)}var ft=class extends Ut{decode(t,n){return super.decode(t,n)}};function R(e,t,n){return new ft(e,t,n)}function Te(e,t,n){let r,i=typeof t=="number"?t:jt(t)?t.toNumber():new Proxy(t,{get(o,s){if(!r){let u=Reflect.get(o,"count");r=jt(u)?u.toNumber():u,Reflect.set(o,"count",r)}return Reflect.get(o,s)},set(o,s,u){return s==="count"&&(r=u),Reflect.set(o,s,u)}});return Gt(e,i,n)}var Er=R([D("instruction"),d("amountIn"),d("minAmountOut")]),Rr=R([D("instruction"),d("maxAmountIn"),d("amountOut")]),Dc=R([D("instruction"),D("nonce")]),vr=R([D("instruction"),D("nonce"),d("startTime")]),Qt=R([d("status"),d("nonce"),d("maxOrder"),d("depth"),d("baseDecimal"),d("quoteDecimal"),d("state"),d("resetFlag"),d("minSize"),d("volMaxCutRatio"),d("amountWaveRatio"),d("baseLotSize"),d("quoteLotSize"),d("minPriceMultiplier"),d("maxPriceMultiplier"),d("systemDecimalValue"),d("minSeparateNumerator"),d("minSeparateDenominator"),d("tradeFeeNumerator"),d("tradeFeeDenominator"),d("pnlNumerator"),d("pnlDenominator"),d("swapFeeNumerator"),d("swapFeeDenominator"),d("baseNeedTakePnl"),d("quoteNeedTakePnl"),d("quoteTotalPnl"),d("baseTotalPnl"),d("poolOpenTime"),d("punishPcAmount"),d("punishCoinAmount"),d("orderbookToInitTime"),ee("swapBaseInAmount"),ee("swapQuoteOutAmount"),d("swapBase2QuoteFee"),ee("swapQuoteInAmount"),ee("swapBaseOutAmount"),d("swapQuote2BaseFee"),k("baseVault"),k("quoteVault"),k("baseMint"),k("quoteMint"),k("lpMint"),k("openOrders"),k("marketId"),k("marketProgramId"),k("targetOrders"),k("withdrawQueue"),k("lpVault"),k("owner"),d("lpReserve"),Te(d(),3,"padding")]),Oc=R([d("accountType"),d("status"),d("nonce"),d("maxOrder"),d("depth"),d("baseDecimal"),d("quoteDecimal"),d("state"),d("resetFlag"),d("minSize"),d("volMaxCutRatio"),d("amountWaveRatio"),d("baseLotSize"),d("quoteLotSize"),d("minPriceMultiplier"),d("maxPriceMultiplier"),d("systemDecimalsValue"),d("abortTradeFactor"),d("priceTickMultiplier"),d("priceTick"),d("minSeparateNumerator"),d("minSeparateDenominator"),d("tradeFeeNumerator"),d("tradeFeeDenominator"),d("pnlNumerator"),d("pnlDenominator"),d("swapFeeNumerator"),d("swapFeeDenominator"),d("baseNeedTakePnl"),d("quoteNeedTakePnl"),d("quoteTotalPnl"),d("baseTotalPnl"),d("poolOpenTime"),d("punishPcAmount"),d("punishCoinAmount"),d("orderbookToInitTime"),ee("swapBaseInAmount"),ee("swapQuoteOutAmount"),ee("swapQuoteInAmount"),ee("swapBaseOutAmount"),d("swapQuote2BaseFee"),d("swapBase2QuoteFee"),k("baseVault"),k("quoteVault"),k("baseMint"),k("quoteMint"),k("lpMint"),k("modelDataAccount"),k("openOrders"),k("marketId"),k("marketProgramId"),k("targetOrders"),k("owner"),Te(d(),64,"padding")]),_r=R([D("instruction"),d("baseAmountIn"),d("quoteAmountIn"),d("fixedSide"),d("otherAmountMin")]),Dr=R([D("instruction"),d("lpAmount"),d("baseAmountMin"),d("quoteAmountMin")]);var Kc=R([d("fee")]);import{PublicKey as Or}from"@solana/web3.js";var Zt=new Or("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Kr=5e4,Fr=R([d("x"),d("y"),d("price")]),Vr=R([d("accountType"),d("status"),d("multiplier"),d("validDataCount"),Te(Fr,Kr,"DataElement")]);function Wr(e){let t=Vr.decode(e);return{accountType:t.accountType.toNumber(),status:t.status.toNumber(),multiplier:t.multiplier.toNumber(),validDataCount:t.validDataCount.toNumber(),DataElement:t.DataElement.map(n=>({x:n.x.toNumber(),y:n.y.toNumber(),price:n.price.toNumber()}))}}var We=class{connection;_layoutData={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};constructor({connection:t}){this.connection=t}get stableModelData(){return this._layoutData}async initStableModelLayout(){if(this._layoutData.validDataCount===0&&this.connection){let t=await this.connection.getAccountInfo(Zt);t&&(this._layoutData=Wr(t?.data))}}};var ol=v("Raydium_liquidity_instruction");function zt({poolKeys:e}){let t=R([D("instruction"),D("simulateType")]),n=Buffer.alloc(t.span);t.encode({instruction:12,simulateType:0},n);let r=[q({pubkey:new te(e.id),isWritable:!1}),q({pubkey:new te(e.authority),isWritable:!1}),q({pubkey:new te(e.openOrders),isWritable:!1}),q({pubkey:new te(e.vault.A),isWritable:!1}),q({pubkey:new te(e.vault.B),isWritable:!1}),q({pubkey:new te(e.mintLp.address),isWritable:!1}),q({pubkey:new te(e.marketId),isWritable:!1}),q({pubkey:new te(e.marketEventQueue),isWritable:!1})];return{instruction:new qr({programId:new te(e.programId),keys:r,data:n})}}import{PublicKey as Ur}from"@solana/web3.js";import Xt from"bn.js";var ul=new Xt(25),cl=new Xt(1e4);var Gr=v("Raydium_liquidity_serum");function Yt({programId:e,marketId:t}){let n=[t.toBuffer()],r=0,i;for(;r<100;){try{let o=n.concat(Buffer.from([r]),Buffer.alloc(7));i=Ur.createProgramAddressSync(o,e)}catch(o){if(o instanceof TypeError)throw o;r++;continue}return{publicKey:i,nonce:r}}throw Gr.logWithError("unable to find a viable program address nonce","params",{programId:e,marketId:t}),new Error("unable to find a viable program address nonce")}var xe=R([k("mint"),k("owner"),d("amount"),ae("delegateOption"),k("delegate"),D("state"),ae("isNativeOption"),d("isNative"),d("delegatedAmount"),ae("closeAuthorityOption"),k("closeAuthority")]);import{Keypair as Pl,PublicKey as Al}from"@solana/web3.js";import Il from"bn.js";import{TOKEN_PROGRAM_ID as Nl}from"@solana/spl-token";var Ml=v("Raydium_Util");import{PublicKey as Ol,SystemProgram as Fl}from"@solana/web3.js";import ql from"bn.js";import{createCloseAccountInstruction as jl,createInitializeAccountInstruction as Ql,createTransferInstruction as Zl,TOKEN_PROGRAM_ID as zl}from"@solana/spl-token";var Jt=R([ae("mintAuthorityOption"),k("mintAuthority"),d("supply"),D("decimals"),D("isInitialized"),ae("freezeAuthorityOption"),k("freezeAuthority")]);function $t({programId:e}){let{publicKey:t}=pe([Buffer.from("amm_config_account_seed","utf-8")],e);return t}function ue({name:e,programId:t,marketId:n}){let{publicKey:r}=pe([t.toBuffer(),n.toBuffer(),Buffer.from(e,"utf-8")],t);return r}function jr({programId:e,marketId:t}){let{publicKey:n}=pe([e.toBuffer(),t.toBuffer(),Buffer.from("open_order_associated_seed","utf-8")],e);return n}function Qr({programId:e}){return pe([Buffer.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],e)}function Im({version:e,marketVersion:t,marketId:n,baseMint:r,quoteMint:i,baseDecimals:o,quoteDecimals:s,programId:u,marketProgramId:c}){let a=ue({name:"amm_associated_seed",programId:u,marketId:n}),l=ue({name:"lp_mint_associated_seed",programId:u,marketId:n}),{publicKey:m,nonce:p}=Qr({programId:u}),g=ue({name:"coin_vault_associated_seed",programId:u,marketId:n}),A=ue({name:"pc_vault_associated_seed",programId:u,marketId:n}),y=ue({name:"temp_lp_token_associated_seed",programId:u,marketId:n}),M=jr({programId:u,marketId:n}),I=ue({name:"target_associated_seed",programId:u,marketId:n}),V=ue({name:"withdraw_associated_seed",programId:u,marketId:n}),{publicKey:S}=Yt({programId:c,marketId:n});return{id:a,baseMint:r,quoteMint:i,lpMint:l,baseDecimals:o,quoteDecimals:s,lpDecimals:o,version:e,programId:u,authority:m,nonce:p,baseVault:g,quoteVault:A,lpVault:y,openOrders:M,targetOrders:I,withdrawQueue:V,marketVersion:t,marketProgramId:c,marketId:n,marketAuthority:S,lookupTableAccount:Ae.default,configId:$t({programId:u})}}var dt;async function Lm({connection:e,poolKeysList:t,config:n}){return t.find(i=>i.modelDataAccount)&&(dt||(dt=new We({connection:e}),await dt.initStableModelLayout())),await Promise.all(t.map(async i=>{if(i.modelDataAccount){let o=zt({poolKeys:i});return(await Rt(e,[o.instruction],"GetPoolData")).map(c=>{let a=vt(c,"GetPoolData"),l=new Pe(Y(a,"status")),m=Number(Y(a,"coin_decimals")),p=Number(Y(a,"pc_decimals")),g=Number(Y(a,"lp_decimals")),A=new Pe(Y(a,"pool_coin_amount")),y=new Pe(Y(a,"pool_pc_amount")),M=new Pe(Y(a,"pool_lp_supply")),I="0";try{I=Y(a,"pool_open_time")}catch{}return{status:l,baseDecimals:m,quoteDecimals:p,lpDecimals:g,baseReserve:A,quoteReserve:y,lpSupply:M,startTime:new Pe(I)}})[0]}else{let[o,s,u,c]=await e.getMultipleAccountsInfo([new Ae(i.id),new Ae(i.vault.A),new Ae(i.vault.B),new Ae(i.mintLp.address)]);if(o===null)throw Error("fetch pool error");if(s===null)throw Error("fetch vaultAccA error");if(u===null)throw Error("fetch vaultAccB error");if(c===null)throw Error("fetch mintAccLp error");let a=Qt.decode(o.data),l=xe.decode(s.data),m=xe.decode(u.data),p=Jt.decode(c.data);return{status:a.status,baseDecimals:a.baseDecimal.toNumber(),quoteDecimals:a.quoteDecimal.toNumber(),lpDecimals:p.decimals,baseReserve:l.amount.sub(a.baseNeedTakePnl),quoteReserve:m.amount.sub(a.quoteNeedTakePnl),lpSupply:a.lpReserve,startTime:a.poolOpenTime}}}))}var gt={volume:0,volumeQuote:0,volumeFee:0,apr:0,feeApr:0,priceMin:0,priceMax:0,rewardApr:[]},Bm=e=>{let t={},n=Hr.toBase58();return Object.keys(e).map(r=>{let i=e[r],[o,s]=[i.baseMint.toBase58(),i.quoteMint.toBase58()];t[r]={id:r,version:4,status:i.status.toNumber(),programId:i.programId.toBase58(),mintA:Fe({address:o,programId:n,decimals:i.baseDecimal.toNumber()}),mintB:Fe({address:s,programId:n,decimals:i.quoteDecimal.toNumber()}),rewardDefaultInfos:[],rewardDefaultPoolInfos:"Ecosystem",price:i.poolPrice.toNumber(),mintAmountA:new me(i.mintAAmount.toString()).div(10**i.baseDecimal.toNumber()).toNumber(),mintAmountB:new me(i.mintBAmount.toString()).div(10**i.quoteDecimal.toNumber()).toNumber(),baseReserve:i.baseReserve,quoteReserve:i.quoteReserve,feeRate:new me(i.tradeFeeNumerator.toString()).div(i.tradeFeeDenominator.toString()).toNumber(),openTime:i.poolOpenTime.toString(),tvl:0,day:gt,week:gt,month:gt,pooltype:[],farmUpcomingCount:0,farmOngoingCount:0,farmFinishedCount:0,type:"Standard",marketId:i.marketId.toBase58(),configId:$t({programId:i.programId}).toBase58(),lpPrice:0,lpAmount:new me(i.lpReserve.toString()).div(10**Math.min(i.baseDecimal.toNumber(),i.quoteDecimal.toNumber())).toNumber(),lpMint:Fe({address:i.lpMint.toBase58(),programId:n,decimals:Math.min(i.baseDecimal.toNumber(),i.quoteDecimal.toNumber())}),burnPercent:0}}),t};export{Lm as fetchMultipleInfo,$t as getAssociatedConfigId,jr as getAssociatedOpenOrders,Im as getAssociatedPoolKeys,Qr as getLiquidityAssociatedAuthority,ue as getLiquidityAssociatedId,Bm as toAmmComputePoolInfo};
//# sourceMappingURL=utils.mjs.map